2023-09-24 00:29:59,718 - __main__ - INFO - Starting exam extraction...
2023-09-24 00:29:59,718 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 00:29:59,723 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 00:29:59,732 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 00:29:59,732 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 00:29:59,744 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 00:29:59,744 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 00:29:59,744 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 00:29:59,744 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 00:29:59,744 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 00:29:59,745 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 00:29:59,745 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 00:29:59,745 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 00:29:59,745 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 00:29:59,745 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 00:29:59,746 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 00:29:59,746 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 00:30:01,983 - extraction_engine.managers.exam_manager - INFO - Exam data: {'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 00:30:01,994 - __main__ - ERROR - Mapped instance expected for relationship comparison to object.   Classes, queries and other SQL elements are not accepted in this context; for comparison with a subquery, use Exam.subject.has(**criteria).
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 17, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 70, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 61, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 31, in _get_or_create_exam
    exam = db_session.query(Exam).filter_by(**exam_data).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\query.py", line 1998, in filter_by
    clauses = [
              ^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\query.py", line 1999, in <listcomp>
    _entity_namespace_key(from_entity, key) == value
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\sql\operators.py", line 582, in __eq__
    return self.operate(eq, other)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\attributes.py", line 452, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[return-value,no-any-return]  # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\relationships.py", line 757, in __eq__
    self.property._optimized_compare(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1180, in _optimized_compare
    raise sa_exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Mapped instance expected for relationship comparison to object.   Classes, queries and other SQL elements are not accepted in this context; for comparison with a subquery, use Exam.subject.has(**criteria).
2023-09-24 01:33:51,177 - __main__ - INFO - Starting exam extraction...
2023-09-24 01:33:51,177 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:33:51,177 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 01:33:51,181 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 01:33:51,181 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 01:33:51,192 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 01:33:51,192 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 01:33:51,193 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:33:51,193 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 01:33:51,193 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 01:33:51,193 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 01:33:51,193 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:33:51,193 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 01:33:51,193 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 01:33:51,193 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 01:33:51,194 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 01:33:51,194 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 01:33:53,246 - extraction_engine.managers.exam_manager - INFO - Exam data: {'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 01:33:53,266 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 17, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 76, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 68, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 50, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 85, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 72, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 45, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 71, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 01:51:51,174 - __main__ - INFO - Starting exam extraction...
2023-09-24 01:51:51,175 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:51:51,175 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 01:51:51,179 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 01:51:51,179 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 01:51:51,190 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 01:51:51,190 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 01:51:51,190 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:51:51,190 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 01:51:51,190 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 01:51:51,190 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 01:51:51,190 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:51:51,191 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 01:51:51,191 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 01:51:51,191 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 01:51:51,191 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 01:51:51,192 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 01:51:53,257 - extraction_engine.managers.exam_manager - INFO - Exam data: {'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 01:51:53,266 - __main__ - ERROR - Query.filter() got an unexpected keyword argument 'month'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 17, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 73, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 63, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 32, in _get_or_create_exam
    exam = get_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\database\database_utils.py", line 46, in get_exam
    exam = session.query(Exam).filter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Query.filter() got an unexpected keyword argument 'month'
2023-09-24 01:55:49,295 - __main__ - INFO - Starting exam extraction...
2023-09-24 01:55:49,295 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:55:49,296 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 01:55:49,300 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 01:55:49,300 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 01:55:49,312 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 01:55:49,312 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 01:55:49,312 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:55:49,312 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 01:55:49,312 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 01:55:49,312 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 01:55:49,312 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 01:55:49,313 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 01:55:49,313 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 01:55:49,313 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 01:55:49,313 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 01:55:49,313 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 01:55:51,383 - extraction_engine.managers.exam_manager - INFO - Exam data: {'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 01:55:51,396 - __main__ - ERROR - (sqlite3.OperationalError) no such table: exams
[SQL: SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE exams.month = ? AND exams.year = ? AND exams.unit_code = ? AND exams.component_code = ?
 LIMIT ? OFFSET ?]
[parameters: ('May', '2016', '0625', '11', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: exams

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 17, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 73, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 63, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 32, in _get_or_create_exam
    exam = get_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\database\database_utils.py", line 51, in get_exam
    ).first()
      ^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\query.py", line 2743, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\query.py", line 2842, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 2262, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 2144, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1412, in execute
    return meth(
           ^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1844, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1984, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: exams
[SQL: SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE exams.month = ? AND exams.year = ? AND exams.unit_code = ? AND exams.component_code = ?
 LIMIT ? OFFSET ?]
[parameters: ('May', '2016', '0625', '11', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2023-09-24 02:04:49,952 - __main__ - INFO - Starting exam extraction...
2023-09-24 02:04:49,999 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:04:49,999 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 02:04:50,003 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 02:04:50,003 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 02:04:50,003 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 02:04:50,003 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 02:04:50,003 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:04:50,004 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 02:04:50,004 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 02:04:50,004 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 02:04:50,004 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:04:50,004 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 02:04:50,004 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 02:04:50,004 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 02:04:50,005 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 02:04:50,005 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 02:04:52,049 - extraction_engine.managers.exam_manager - INFO - Exam data: {'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 02:04:52,054 - __main__ - ERROR - exam_board is required for Exam creation.
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 18, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 73, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 63, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 36, in _get_or_create_exam
    exam = exam_factory.create_exam(exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 18, in create_exam
    self._validate_exam_data(exam_data)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 13, in _validate_exam_data
    raise ValueError(f"{field} is required for Exam creation.")
ValueError: exam_board is required for Exam creation.
2023-09-24 02:06:22,221 - __main__ - INFO - Starting exam extraction...
2023-09-24 02:09:16,474 - __main__ - INFO - Starting exam extraction...
2023-09-24 02:09:16,524 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:09:16,528 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 02:09:16,536 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 02:09:16,537 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 02:09:16,537 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 02:09:16,537 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 02:09:16,537 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:09:16,537 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 02:09:16,537 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 02:09:16,538 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 02:09:16,538 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:09:16,538 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 02:09:16,538 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 02:09:16,538 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 02:09:16,538 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 02:09:16,539 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 02:09:18,793 - extraction_engine.managers.exam_manager - INFO - Exam data: {'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 02:09:18,798 - __main__ - ERROR - exam_board is required for Exam creation.
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 18, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 73, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 63, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 36, in _get_or_create_exam
    exam = exam_factory.create_exam(exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 18, in create_exam
    self._validate_exam_data(exam_data)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 13, in _validate_exam_data
    raise ValueError(f"{field} is required for Exam creation.")
ValueError: exam_board is required for Exam creation.
2023-09-24 02:25:00,010 - __main__ - INFO - Starting exam extraction...
2023-09-24 02:25:00,060 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:25:00,060 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 02:25:00,064 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 02:25:00,064 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 02:25:00,065 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 02:25:00,065 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 02:25:00,065 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:25:00,065 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 02:25:00,065 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 02:25:00,065 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 02:25:00,065 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:25:00,065 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 02:25:00,066 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 02:25:00,066 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 02:25:00,066 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 02:25:00,066 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 02:25:02,111 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 02:25:02,116 - root - DEBUG - Exam: <database.models.Exam object at 0x000001DA9B084B90>
2023-09-24 02:25:02,127 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 18, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 85, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 72, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 45, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 71, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 02:51:24,323 - __main__ - INFO - Starting exam extraction...
2023-09-24 02:51:24,376 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:51:24,376 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 02:51:24,380 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 02:51:24,380 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 02:51:24,381 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 02:51:24,381 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 02:51:24,381 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:51:24,381 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 02:51:24,381 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 02:51:24,381 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 02:51:24,381 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:51:24,381 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 02:51:24,382 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 02:51:24,382 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 02:51:24,382 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 02:51:24,383 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 02:51:24,383 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 02:51:26,508 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 02:51:26,513 - root - DEBUG - Exam: <database.models.Exam object at 0x0000024D2141FD50>
2023-09-24 02:51:26,526 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 18, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 86, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 73, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 46, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 71, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 02:57:54,361 - __main__ - INFO - Starting exam extraction...
2023-09-24 02:57:54,411 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:57:54,411 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 02:57:54,414 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 02:57:54,415 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 02:57:54,415 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 02:57:54,415 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 02:57:54,415 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:57:54,416 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 02:57:54,416 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 02:57:54,416 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 02:57:54,416 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 02:57:54,416 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 02:57:54,416 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 02:57:54,416 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 02:57:54,417 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 02:57:54,417 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 02:57:54,417 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 02:57:56,456 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 02:57:56,462 - root - DEBUG - Exam: <database.models.Exam object at 0x000001E65EC4C3D0>
2023-09-24 02:57:56,473 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 18, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:08:56,213 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:08:56,262 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:08:56,262 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:08:56,266 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:08:56,266 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:08:56,267 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:08:56,267 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:08:56,267 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:08:56,267 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:08:56,267 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:08:56,267 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:08:56,267 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:08:56,267 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:08:56,268 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:08:56,268 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:08:56,268 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:08:56,269 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:08:56,269 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:08:58,422 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:08:58,427 - root - DEBUG - Exam: <database.models.Exam object at 0x00000296C8AC0110>
2023-09-24 10:08:58,439 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:13:37,337 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:13:37,384 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:13:37,384 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:13:37,388 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:13:37,388 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:13:37,388 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:13:37,389 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:13:37,389 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:13:37,389 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:13:37,389 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:13:37,389 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:13:37,390 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:13:37,390 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:13:37,390 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:13:37,390 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:13:37,391 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:13:37,391 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:13:37,391 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:13:39,512 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:13:39,518 - root - DEBUG - Exam: <database.models.Exam object at 0x00000248FF984E50>
2023-09-24 10:13:39,529 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:23:47,181 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:23:47,231 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:23:47,232 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:23:47,235 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:23:47,236 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:23:47,236 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:23:47,236 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:23:47,236 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:23:47,236 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:23:47,236 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:23:47,237 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:23:47,237 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:23:47,237 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:23:47,237 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:23:47,237 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:23:47,238 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:23:47,238 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:23:47,238 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:23:49,353 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:23:49,359 - root - DEBUG - Exam: <database.models.Exam object at 0x000001EEB1F74050>
2023-09-24 10:23:49,369 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:35:26,726 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:35:26,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:35:26,737 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subjects")
2023-09-24 10:35:26,737 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,738 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("subjects")
2023-09-24 10:35:26,738 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,738 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("exams")
2023-09-24 10:35:26,738 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,739 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("exams")
2023-09-24 10:35:26,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,739 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("difficulties")
2023-09-24 10:35:26,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,740 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("difficulties")
2023-09-24 10:35:26,740 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,740 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("questions")
2023-09-24 10:35:26,741 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,741 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("questions")
2023-09-24 10:35:26,741 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,742 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subtopics")
2023-09-24 10:35:26,742 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,742 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("subtopics")
2023-09-24 10:35:26,742 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,743 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("question_subtopic")
2023-09-24 10:35:26,743 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,743 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("question_subtopic")
2023-09-24 10:35:26,744 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,744 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("answers")
2023-09-24 10:35:26,744 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,745 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("answers")
2023-09-24 10:35:26,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:35:26,746 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subjects (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


2023-09-24 10:35:26,747 - sqlalchemy.engine.Engine - INFO - [no key 0.00124s] ()
2023-09-24 10:35:26,751 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE difficulties (
	id INTEGER NOT NULL, 
	level VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (level)
)


2023-09-24 10:35:26,752 - sqlalchemy.engine.Engine - INFO - [no key 0.00132s] ()
2023-09-24 10:35:26,756 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE exams (
	id INTEGER NOT NULL, 
	exam_board VARCHAR NOT NULL, 
	month VARCHAR NOT NULL, 
	year INTEGER NOT NULL, 
	unit_code VARCHAR NOT NULL, 
	component_code VARCHAR NOT NULL, 
	subject_id INTEGER, 
	PRIMARY KEY (id), 
	CONSTRAINT uc_exam UNIQUE (exam_board, month, year, unit_code, component_code, subject_id), 
	FOREIGN KEY(subject_id) REFERENCES subjects (id)
)


2023-09-24 10:35:26,758 - sqlalchemy.engine.Engine - INFO - [no key 0.00223s] ()
2023-09-24 10:35:26,762 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subtopics (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	subject_id INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(subject_id) REFERENCES subjects (id)
)


2023-09-24 10:35:26,763 - sqlalchemy.engine.Engine - INFO - [no key 0.00155s] ()
2023-09-24 10:35:26,766 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	image_path VARCHAR NOT NULL, 
	question_number INTEGER, 
	difficulty_id INTEGER, 
	exam_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (image_path), 
	FOREIGN KEY(difficulty_id) REFERENCES difficulties (id), 
	FOREIGN KEY(exam_id) REFERENCES exams (id)
)


2023-09-24 10:35:26,768 - sqlalchemy.engine.Engine - INFO - [no key 0.00183s] ()
2023-09-24 10:35:26,771 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE question_subtopic (
	question_id INTEGER NOT NULL, 
	subtopic_id INTEGER NOT NULL, 
	PRIMARY KEY (question_id, subtopic_id), 
	FOREIGN KEY(question_id) REFERENCES questions (id), 
	FOREIGN KEY(subtopic_id) REFERENCES subtopics (id)
)


2023-09-24 10:35:26,773 - sqlalchemy.engine.Engine - INFO - [no key 0.00165s] ()
2023-09-24 10:35:26,776 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE answers (
	id INTEGER NOT NULL, 
	question_id INTEGER NOT NULL, 
	answer_text VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES questions (id)
)


2023-09-24 10:35:26,777 - sqlalchemy.engine.Engine - INFO - [no key 0.00144s] ()
2023-09-24 10:35:26,780 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:35:26,792 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:35:26,793 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:35:26,794 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s (insertmanyvalues) 1/3 (ordered; batch not supported)] ('biology',)
2023-09-24 10:35:26,795 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:35:26,795 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/3 (ordered; batch not supported)] ('chemistry',)
2023-09-24 10:35:26,795 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:35:26,796 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/3 (ordered; batch not supported)] ('physics',)
2023-09-24 10:35:26,797 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:35:26,797 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s (insertmanyvalues) 1/5 (ordered; batch not supported)] ('Edexcel', 'June', 2022, 'U1', 'C1', 1)
2023-09-24 10:35:26,798 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:35:26,798 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/5 (ordered; batch not supported)] ('Edexcel', 'June', 2021, 'U4', 'C4', 1)
2023-09-24 10:35:26,798 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:35:26,799 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/5 (ordered; batch not supported)] ('AQA', 'June', 2022, 'U2', 'C2', 2)
2023-09-24 10:35:26,799 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:35:26,800 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/5 (ordered; batch not supported)] ('AQA', 'June', 2021, 'U5', 'C5', 2)
2023-09-24 10:35:26,800 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:35:26,800 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/5 (ordered; batch not supported)] ('OCR', 'January', 2022, 'U3', 'C3', 3)
2023-09-24 10:35:26,801 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:35:26,804 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:35:26,804 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:35:26,808 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:35:26,809 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:35:26,810 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:35:26,810 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:35:26,810 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:35:26,810 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:35:26,810 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:35:26,810 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:35:26,811 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:35:26,811 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:35:26,811 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:35:26,811 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:35:26,811 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:35:26,811 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:35:26,812 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:35:29,002 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:35:29,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:35:29,006 - sqlalchemy.engine.Engine - INFO - SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE exams.month = ? AND exams.year = ? AND exams.unit_code = ? AND exams.component_code = ?
 LIMIT ? OFFSET ?
2023-09-24 10:35:29,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('May', '2016', '0625', '11', 1, 0)
2023-09-24 10:35:29,009 - sqlalchemy.engine.Engine - INFO - SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE lower(exams.month) LIKE lower(?) AND exams.year = ? AND lower(exams.unit_code) LIKE lower(?) AND lower(exams.component_code) LIKE lower(?)
 LIMIT ? OFFSET ?
2023-09-24 10:35:29,010 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ('May', '2016', '0625', '11', 1, 0)
2023-09-24 10:35:29,010 - root - DEBUG - Exam: <database.models.Exam object at 0x000001F566248B90>
2023-09-24 10:35:29,022 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2023-09-24 10:35:29,022 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:38:44,610 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:38:44,620 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:44,621 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subjects")
2023-09-24 10:38:44,621 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,622 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("subjects")
2023-09-24 10:38:44,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,622 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("exams")
2023-09-24 10:38:44,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,622 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("exams")
2023-09-24 10:38:44,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("difficulties")
2023-09-24 10:38:44,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,624 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("difficulties")
2023-09-24 10:38:44,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,625 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("questions")
2023-09-24 10:38:44,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,626 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("questions")
2023-09-24 10:38:44,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,627 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subtopics")
2023-09-24 10:38:44,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,627 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("subtopics")
2023-09-24 10:38:44,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,628 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("question_subtopic")
2023-09-24 10:38:44,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,628 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("question_subtopic")
2023-09-24 10:38:44,629 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,629 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("answers")
2023-09-24 10:38:44,629 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,630 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("answers")
2023-09-24 10:38:44,630 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:44,631 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subjects (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


2023-09-24 10:38:44,632 - sqlalchemy.engine.Engine - INFO - [no key 0.00117s] ()
2023-09-24 10:38:44,637 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE difficulties (
	id INTEGER NOT NULL, 
	level VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (level)
)


2023-09-24 10:38:44,638 - sqlalchemy.engine.Engine - INFO - [no key 0.00128s] ()
2023-09-24 10:38:44,641 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE exams (
	id INTEGER NOT NULL, 
	exam_board VARCHAR NOT NULL, 
	month VARCHAR NOT NULL, 
	year INTEGER NOT NULL, 
	unit_code VARCHAR NOT NULL, 
	component_code VARCHAR NOT NULL, 
	subject_id INTEGER, 
	PRIMARY KEY (id), 
	CONSTRAINT uc_exam UNIQUE (exam_board, month, year, unit_code, component_code, subject_id), 
	FOREIGN KEY(subject_id) REFERENCES subjects (id)
)


2023-09-24 10:38:44,643 - sqlalchemy.engine.Engine - INFO - [no key 0.00206s] ()
2023-09-24 10:38:44,646 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subtopics (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	subject_id INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(subject_id) REFERENCES subjects (id)
)


2023-09-24 10:38:44,648 - sqlalchemy.engine.Engine - INFO - [no key 0.00162s] ()
2023-09-24 10:38:44,651 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	image_path VARCHAR NOT NULL, 
	question_number INTEGER, 
	difficulty_id INTEGER, 
	exam_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (image_path), 
	FOREIGN KEY(difficulty_id) REFERENCES difficulties (id), 
	FOREIGN KEY(exam_id) REFERENCES exams (id)
)


2023-09-24 10:38:44,653 - sqlalchemy.engine.Engine - INFO - [no key 0.00179s] ()
2023-09-24 10:38:44,656 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE question_subtopic (
	question_id INTEGER NOT NULL, 
	subtopic_id INTEGER NOT NULL, 
	PRIMARY KEY (question_id, subtopic_id), 
	FOREIGN KEY(question_id) REFERENCES questions (id), 
	FOREIGN KEY(subtopic_id) REFERENCES subtopics (id)
)


2023-09-24 10:38:44,657 - sqlalchemy.engine.Engine - INFO - [no key 0.00128s] ()
2023-09-24 10:38:44,660 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE answers (
	id INTEGER NOT NULL, 
	question_id INTEGER NOT NULL, 
	answer_text VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES questions (id)
)


2023-09-24 10:38:44,662 - sqlalchemy.engine.Engine - INFO - [no key 0.00150s] ()
2023-09-24 10:38:44,665 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:38:44,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:44,678 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:38:44,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s (insertmanyvalues) 1/3 (ordered; batch not supported)] ('biology',)
2023-09-24 10:38:44,679 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:38:44,680 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/3 (ordered; batch not supported)] ('chemistry',)
2023-09-24 10:38:44,680 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:38:44,680 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/3 (ordered; batch not supported)] ('physics',)
2023-09-24 10:38:44,682 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:44,682 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s (insertmanyvalues) 1/5 (ordered; batch not supported)] ('Edexcel', 'June', 2022, 'U1', 'C1', 1)
2023-09-24 10:38:44,682 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:44,683 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/5 (ordered; batch not supported)] ('Edexcel', 'June', 2021, 'U4', 'C4', 1)
2023-09-24 10:38:44,683 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:44,683 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/5 (ordered; batch not supported)] ('AQA', 'June', 2022, 'U2', 'C2', 2)
2023-09-24 10:38:44,684 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:44,684 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/5 (ordered; batch not supported)] ('AQA', 'June', 2021, 'U5', 'C5', 2)
2023-09-24 10:38:44,684 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:44,684 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/5 (ordered; batch not supported)] ('OCR', 'January', 2022, 'U3', 'C3', 3)
2023-09-24 10:38:44,685 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:38:44,687 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:38:44,688 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:38:44,692 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:38:44,692 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:38:44,693 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:38:44,693 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:38:44,693 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:38:44,693 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:38:44,694 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:38:44,694 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:38:44,694 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:38:44,694 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:38:44,694 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:38:44,694 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:38:44,695 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:38:44,695 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:38:44,695 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:38:46,827 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:38:46,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:46,831 - sqlalchemy.engine.Engine - INFO - SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE exams.month = ? AND exams.year = ? AND exams.unit_code = ? AND exams.component_code = ?
 LIMIT ? OFFSET ?
2023-09-24 10:38:46,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('May', '2016', '0625', '11', 1, 0)
2023-09-24 10:38:46,834 - sqlalchemy.engine.Engine - INFO - SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE lower(exams.month) LIKE lower(?) AND exams.year = ? AND lower(exams.unit_code) LIKE lower(?) AND lower(exams.component_code) LIKE lower(?)
 LIMIT ? OFFSET ?
2023-09-24 10:38:46,835 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('May', '2016', '0625', '11', 1, 0)
2023-09-24 10:38:46,836 - root - DEBUG - Exam: <database.models.Exam object at 0x0000022BA1FFA050>
2023-09-24 10:38:46,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2023-09-24 10:38:46,849 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:38:46,869 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:46,869 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subjects")
2023-09-24 10:38:46,870 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,870 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("exams")
2023-09-24 10:38:46,871 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,871 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("difficulties")
2023-09-24 10:38:46,872 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,872 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("questions")
2023-09-24 10:38:46,872 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,873 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subtopics")
2023-09-24 10:38:46,873 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,874 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("question_subtopic")
2023-09-24 10:38:46,874 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,874 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("answers")
2023-09-24 10:38:46,875 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:46,875 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE answers
2023-09-24 10:38:46,876 - sqlalchemy.engine.Engine - INFO - [no key 0.00047s] ()
2023-09-24 10:38:46,880 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE question_subtopic
2023-09-24 10:38:46,881 - sqlalchemy.engine.Engine - INFO - [no key 0.00059s] ()
2023-09-24 10:38:46,885 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE questions
2023-09-24 10:38:46,885 - sqlalchemy.engine.Engine - INFO - [no key 0.00064s] ()
2023-09-24 10:38:46,888 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE subtopics
2023-09-24 10:38:46,889 - sqlalchemy.engine.Engine - INFO - [no key 0.00097s] ()
2023-09-24 10:38:46,893 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE exams
2023-09-24 10:38:46,894 - sqlalchemy.engine.Engine - INFO - [no key 0.00089s] ()
2023-09-24 10:38:46,898 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE difficulties
2023-09-24 10:38:46,899 - sqlalchemy.engine.Engine - INFO - [no key 0.00091s] ()
2023-09-24 10:38:46,902 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE subjects
2023-09-24 10:38:46,903 - sqlalchemy.engine.Engine - INFO - [no key 0.00067s] ()
2023-09-24 10:38:46,906 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:38:53,433 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:38:53,444 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:53,445 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subjects")
2023-09-24 10:38:53,445 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,446 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("subjects")
2023-09-24 10:38:53,446 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,447 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("exams")
2023-09-24 10:38:53,447 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,447 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("exams")
2023-09-24 10:38:53,448 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,448 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("difficulties")
2023-09-24 10:38:53,448 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,449 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("difficulties")
2023-09-24 10:38:53,449 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,449 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("questions")
2023-09-24 10:38:53,449 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,450 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("questions")
2023-09-24 10:38:53,450 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,451 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subtopics")
2023-09-24 10:38:53,451 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,451 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("subtopics")
2023-09-24 10:38:53,452 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,452 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("question_subtopic")
2023-09-24 10:38:53,452 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,453 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("question_subtopic")
2023-09-24 10:38:53,453 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,453 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("answers")
2023-09-24 10:38:53,453 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,454 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("answers")
2023-09-24 10:38:53,454 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:53,455 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subjects (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


2023-09-24 10:38:53,456 - sqlalchemy.engine.Engine - INFO - [no key 0.00116s] ()
2023-09-24 10:38:53,459 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE difficulties (
	id INTEGER NOT NULL, 
	level VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (level)
)


2023-09-24 10:38:53,461 - sqlalchemy.engine.Engine - INFO - [no key 0.00124s] ()
2023-09-24 10:38:53,464 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE exams (
	id INTEGER NOT NULL, 
	exam_board VARCHAR NOT NULL, 
	month VARCHAR NOT NULL, 
	year INTEGER NOT NULL, 
	unit_code VARCHAR NOT NULL, 
	component_code VARCHAR NOT NULL, 
	subject_id INTEGER, 
	PRIMARY KEY (id), 
	CONSTRAINT uc_exam UNIQUE (exam_board, month, year, unit_code, component_code, subject_id), 
	FOREIGN KEY(subject_id) REFERENCES subjects (id)
)


2023-09-24 10:38:53,466 - sqlalchemy.engine.Engine - INFO - [no key 0.00220s] ()
2023-09-24 10:38:53,469 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subtopics (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	subject_id INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(subject_id) REFERENCES subjects (id)
)


2023-09-24 10:38:53,471 - sqlalchemy.engine.Engine - INFO - [no key 0.00147s] ()
2023-09-24 10:38:53,474 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE questions (
	id INTEGER NOT NULL, 
	image_path VARCHAR NOT NULL, 
	question_number INTEGER, 
	difficulty_id INTEGER, 
	exam_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (image_path), 
	FOREIGN KEY(difficulty_id) REFERENCES difficulties (id), 
	FOREIGN KEY(exam_id) REFERENCES exams (id)
)


2023-09-24 10:38:53,476 - sqlalchemy.engine.Engine - INFO - [no key 0.00194s] ()
2023-09-24 10:38:53,479 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE question_subtopic (
	question_id INTEGER NOT NULL, 
	subtopic_id INTEGER NOT NULL, 
	PRIMARY KEY (question_id, subtopic_id), 
	FOREIGN KEY(question_id) REFERENCES questions (id), 
	FOREIGN KEY(subtopic_id) REFERENCES subtopics (id)
)


2023-09-24 10:38:53,481 - sqlalchemy.engine.Engine - INFO - [no key 0.00159s] ()
2023-09-24 10:38:53,484 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE answers (
	id INTEGER NOT NULL, 
	question_id INTEGER NOT NULL, 
	answer_text VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES questions (id)
)


2023-09-24 10:38:53,486 - sqlalchemy.engine.Engine - INFO - [no key 0.00144s] ()
2023-09-24 10:38:53,489 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:38:53,501 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:53,502 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:38:53,502 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s (insertmanyvalues) 1/3 (ordered; batch not supported)] ('biology',)
2023-09-24 10:38:53,504 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:38:53,504 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/3 (ordered; batch not supported)] ('chemistry',)
2023-09-24 10:38:53,504 - sqlalchemy.engine.Engine - INFO - INSERT INTO subjects (name) VALUES (?) RETURNING id
2023-09-24 10:38:53,505 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/3 (ordered; batch not supported)] ('physics',)
2023-09-24 10:38:53,506 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:53,506 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s (insertmanyvalues) 1/5 (ordered; batch not supported)] ('Edexcel', 'June', 2022, 'U1', 'C1', 1)
2023-09-24 10:38:53,507 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:53,507 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/5 (ordered; batch not supported)] ('Edexcel', 'June', 2021, 'U4', 'C4', 1)
2023-09-24 10:38:53,508 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:53,508 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/5 (ordered; batch not supported)] ('AQA', 'June', 2022, 'U2', 'C2', 2)
2023-09-24 10:38:53,508 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:53,509 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/5 (ordered; batch not supported)] ('AQA', 'June', 2021, 'U5', 'C5', 2)
2023-09-24 10:38:53,509 - sqlalchemy.engine.Engine - INFO - INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?) RETURNING id
2023-09-24 10:38:53,509 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/5 (ordered; batch not supported)] ('OCR', 'January', 2022, 'U3', 'C3', 3)
2023-09-24 10:38:53,510 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:38:53,512 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:38:53,513 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:38:53,517 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:38:53,518 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:38:53,518 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:38:53,518 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:38:53,519 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:38:53,519 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:38:53,519 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:38:53,519 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:38:53,519 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:38:53,519 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:38:53,519 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:38:53,520 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:38:53,520 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:38:53,520 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:38:53,520 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:38:55,571 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:38:55,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:55,576 - sqlalchemy.engine.Engine - INFO - SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE exams.month = ? AND exams.year = ? AND exams.unit_code = ? AND exams.component_code = ?
 LIMIT ? OFFSET ?
2023-09-24 10:38:55,576 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] ('May', '2016', '0625', '11', 1, 0)
2023-09-24 10:38:55,578 - sqlalchemy.engine.Engine - INFO - SELECT exams.id AS exams_id, exams.exam_board AS exams_exam_board, exams.month AS exams_month, exams.year AS exams_year, exams.unit_code AS exams_unit_code, exams.component_code AS exams_component_code, exams.subject_id AS exams_subject_id 
FROM exams 
WHERE lower(exams.month) LIKE lower(?) AND exams.year = ? AND lower(exams.unit_code) LIKE lower(?) AND lower(exams.component_code) LIKE lower(?)
 LIMIT ? OFFSET ?
2023-09-24 10:38:55,579 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] ('May', '2016', '0625', '11', 1, 0)
2023-09-24 10:38:55,580 - root - DEBUG - Exam: <database.models.Exam object at 0x00000185BF6A2150>
2023-09-24 10:38:55,591 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2023-09-24 10:38:55,592 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:38:55,610 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2023-09-24 10:38:55,611 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subjects")
2023-09-24 10:38:55,611 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,612 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("exams")
2023-09-24 10:38:55,612 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,613 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("difficulties")
2023-09-24 10:38:55,613 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,614 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("questions")
2023-09-24 10:38:55,614 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,615 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("subtopics")
2023-09-24 10:38:55,615 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,616 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("question_subtopic")
2023-09-24 10:38:55,616 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,616 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("answers")
2023-09-24 10:38:55,617 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2023-09-24 10:38:55,617 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE answers
2023-09-24 10:38:55,618 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2023-09-24 10:38:55,621 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE question_subtopic
2023-09-24 10:38:55,621 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2023-09-24 10:38:55,624 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE questions
2023-09-24 10:38:55,625 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2023-09-24 10:38:55,628 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE subtopics
2023-09-24 10:38:55,628 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2023-09-24 10:38:55,631 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE exams
2023-09-24 10:38:55,631 - sqlalchemy.engine.Engine - INFO - [no key 0.00053s] ()
2023-09-24 10:38:55,635 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE difficulties
2023-09-24 10:38:55,635 - sqlalchemy.engine.Engine - INFO - [no key 0.00048s] ()
2023-09-24 10:38:55,638 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE subjects
2023-09-24 10:38:55,638 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2023-09-24 10:38:55,641 - sqlalchemy.engine.Engine - INFO - COMMIT
2023-09-24 10:39:54,914 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:39:54,963 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:39:54,964 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:39:54,967 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:39:54,967 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:39:54,968 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:39:54,968 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:39:54,968 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:39:54,968 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:39:54,968 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:39:54,968 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:39:54,968 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:39:54,968 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:39:54,969 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:39:54,969 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:39:54,970 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:39:54,970 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:39:54,970 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:39:57,089 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:39:57,094 - root - DEBUG - Exam: <database.models.Exam object at 0x000001A357856390>
2023-09-24 10:39:57,106 - __main__ - ERROR - 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 87, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 74, in _process_images
    questions.extend(self._extract_questions(image))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 47, in _extract_questions
    return self.image_processor.extract(image)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\processing\CambridgeScienceImageProcessor.py", line 74, in extract
    binary = self._convert_to_binary_image(grayscale, self._binary_threshold)
                                                      ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CambridgeScienceImageProcessor' object has no attribute '_binary_threshold'
2023-09-24 10:44:53,347 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:44:53,397 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:44:53,397 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:44:53,401 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:44:53,401 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:44:53,402 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:44:53,402 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:44:53,402 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:44:53,402 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:44:53,403 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:44:53,403 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:44:53,403 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:44:53,403 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:44:53,403 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:44:53,403 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:44:53,404 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:44:53,404 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:44:53,404 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:44:55,502 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:44:55,508 - root - DEBUG - Exam: <database.models.Exam object at 0x000001DBBB1C9E50>
2023-09-24 10:44:55,508 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:44:55,508 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:44:56,175 - __main__ - ERROR - 'cambridge_science'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 88, in execute
    question_nums, processed_images = self._process_images(images)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 80, in _process_images
    post_processed_images.append(self._post_process(image))
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 56, in _post_process
    coords = self.config[self.exam_format]["textProcessor"]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
KeyError: 'cambridge_science'
2023-09-24 10:49:38,250 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:49:38,299 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:49:38,299 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:49:38,303 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:49:38,303 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:49:38,304 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:49:38,304 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:49:38,304 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:49:38,304 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:49:38,304 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:49:38,304 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:49:38,304 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:49:38,304 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:49:38,304 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:49:38,305 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:49:38,305 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:49:38,305 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:49:38,305 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:49:40,390 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:49:40,396 - root - DEBUG - Exam: <database.models.Exam object at 0x0000020BE4281910>
2023-09-24 10:49:40,396 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:49:40,396 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:49:46,233 - __main__ - ERROR - too many values to unpack (expected 2)
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 88, in execute
    question_nums, processed_images = self._process_images(images)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2023-09-24 10:51:47,020 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:51:47,068 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:51:47,069 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:51:47,072 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:51:47,073 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:51:47,074 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:51:47,074 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:51:47,074 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:51:47,074 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:51:47,075 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:51:47,075 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:51:47,075 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:51:47,075 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:51:47,075 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:51:47,076 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:51:47,076 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:51:47,076 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:51:47,076 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:51:49,114 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:51:49,119 - root - DEBUG - Exam: <database.models.Exam object at 0x000002E037582110>
2023-09-24 10:51:49,120 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:51:49,120 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:51:54,755 - __main__ - ERROR - QuestionFactory not set
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in execute
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in <listcomp>
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 68, in _create_question
    raise Exception("QuestionFactory not set")
Exception: QuestionFactory not set
2023-09-24 10:53:44,809 - __main__ - INFO - Starting exam extraction...
2023-09-24 10:53:44,858 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:53:44,858 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 10:53:44,862 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 10:53:44,862 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 10:53:44,863 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 10:53:44,863 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 10:53:44,863 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:53:44,863 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 10:53:44,863 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 10:53:44,863 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 10:53:44,863 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 10:53:44,864 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 10:53:44,864 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 10:53:44,864 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 10:53:44,864 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 10:53:44,864 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 10:53:44,864 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 10:53:46,939 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 10:53:46,944 - root - DEBUG - Exam: <database.models.Exam object at 0x0000024CDCF52710>
2023-09-24 10:53:46,944 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:53:46,945 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 10:53:52,611 - __main__ - ERROR - 'number' is an invalid keyword argument for Question
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in execute
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in <listcomp>
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 66, in _create_question
    return self.question_factory.create_question(image, qnum)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 17, in create_question
    question = Question(exam=self.exam, number=qnum)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'number' is an invalid keyword argument for Question
2023-09-24 11:00:45,432 - __main__ - INFO - Starting exam extraction...
2023-09-24 11:00:45,480 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:00:45,480 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 11:00:45,484 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 11:00:45,484 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 11:00:45,485 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 11:00:45,485 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 11:00:45,485 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:00:45,485 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 11:00:45,485 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 11:00:45,485 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 11:00:45,486 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:00:45,486 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 11:00:45,486 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 11:00:45,486 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 11:00:45,486 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 11:00:45,487 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 11:00:45,487 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 11:00:47,560 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 11:00:47,566 - root - DEBUG - Exam: <database.models.Exam object at 0x000001FC8A1B5FD0>
2023-09-24 11:00:47,566 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:00:47,567 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:00:53,258 - PIL.Image - DEBUG - Importing BlpImagePlugin
2023-09-24 11:00:53,260 - PIL.Image - DEBUG - Importing BmpImagePlugin
2023-09-24 11:00:53,260 - PIL.Image - DEBUG - Importing BufrStubImagePlugin
2023-09-24 11:00:53,261 - PIL.Image - DEBUG - Importing CurImagePlugin
2023-09-24 11:00:53,262 - PIL.Image - DEBUG - Importing DcxImagePlugin
2023-09-24 11:00:53,263 - PIL.Image - DEBUG - Importing DdsImagePlugin
2023-09-24 11:00:53,264 - PIL.Image - DEBUG - Importing EpsImagePlugin
2023-09-24 11:00:53,293 - PIL.Image - DEBUG - Importing FitsImagePlugin
2023-09-24 11:00:53,294 - PIL.Image - DEBUG - Importing FliImagePlugin
2023-09-24 11:00:53,295 - PIL.Image - DEBUG - Importing FpxImagePlugin
2023-09-24 11:00:53,297 - PIL.Image - DEBUG - Image: failed to import FpxImagePlugin: No module named 'olefile'
2023-09-24 11:00:53,297 - PIL.Image - DEBUG - Importing FtexImagePlugin
2023-09-24 11:00:53,298 - PIL.Image - DEBUG - Importing GbrImagePlugin
2023-09-24 11:00:53,299 - PIL.Image - DEBUG - Importing GifImagePlugin
2023-09-24 11:00:53,299 - PIL.Image - DEBUG - Importing GribStubImagePlugin
2023-09-24 11:00:53,300 - PIL.Image - DEBUG - Importing Hdf5StubImagePlugin
2023-09-24 11:00:53,301 - PIL.Image - DEBUG - Importing IcnsImagePlugin
2023-09-24 11:00:53,304 - PIL.Image - DEBUG - Importing IcoImagePlugin
2023-09-24 11:00:53,305 - PIL.Image - DEBUG - Importing ImImagePlugin
2023-09-24 11:00:53,307 - PIL.Image - DEBUG - Importing ImtImagePlugin
2023-09-24 11:00:53,308 - PIL.Image - DEBUG - Importing IptcImagePlugin
2023-09-24 11:00:53,308 - PIL.Image - DEBUG - Importing JpegImagePlugin
2023-09-24 11:00:53,309 - PIL.Image - DEBUG - Importing Jpeg2KImagePlugin
2023-09-24 11:00:53,309 - PIL.Image - DEBUG - Importing McIdasImagePlugin
2023-09-24 11:00:53,310 - PIL.Image - DEBUG - Importing MicImagePlugin
2023-09-24 11:00:53,311 - PIL.Image - DEBUG - Image: failed to import MicImagePlugin: No module named 'olefile'
2023-09-24 11:00:53,311 - PIL.Image - DEBUG - Importing MpegImagePlugin
2023-09-24 11:00:53,312 - PIL.Image - DEBUG - Importing MpoImagePlugin
2023-09-24 11:00:53,316 - PIL.Image - DEBUG - Importing MspImagePlugin
2023-09-24 11:00:53,317 - PIL.Image - DEBUG - Importing PalmImagePlugin
2023-09-24 11:00:53,318 - PIL.Image - DEBUG - Importing PcdImagePlugin
2023-09-24 11:00:53,319 - PIL.Image - DEBUG - Importing PcxImagePlugin
2023-09-24 11:00:53,320 - PIL.Image - DEBUG - Importing PdfImagePlugin
2023-09-24 11:00:53,325 - PIL.Image - DEBUG - Importing PixarImagePlugin
2023-09-24 11:00:53,326 - PIL.Image - DEBUG - Importing PngImagePlugin
2023-09-24 11:00:53,326 - PIL.Image - DEBUG - Importing PpmImagePlugin
2023-09-24 11:00:53,326 - PIL.Image - DEBUG - Importing PsdImagePlugin
2023-09-24 11:00:53,327 - PIL.Image - DEBUG - Importing QoiImagePlugin
2023-09-24 11:00:53,328 - PIL.Image - DEBUG - Importing SgiImagePlugin
2023-09-24 11:00:53,329 - PIL.Image - DEBUG - Importing SpiderImagePlugin
2023-09-24 11:00:53,330 - PIL.Image - DEBUG - Importing SunImagePlugin
2023-09-24 11:00:53,331 - PIL.Image - DEBUG - Importing TgaImagePlugin
2023-09-24 11:00:53,332 - PIL.Image - DEBUG - Importing TiffImagePlugin
2023-09-24 11:00:53,332 - PIL.Image - DEBUG - Importing WebPImagePlugin
2023-09-24 11:00:53,349 - PIL.Image - DEBUG - Importing WmfImagePlugin
2023-09-24 11:00:53,351 - PIL.Image - DEBUG - Importing XbmImagePlugin
2023-09-24 11:00:53,352 - PIL.Image - DEBUG - Importing XpmImagePlugin
2023-09-24 11:00:53,353 - PIL.Image - DEBUG - Importing XVThumbImagePlugin
2023-09-24 11:00:53,355 - __main__ - ERROR - [WinError 2] The system cannot find the file specified: "C:\\Users\\Tariq\\Documents\\birkbeck-project\\None-('0625', '0625')-1695549653258"
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2390, in save
    format = EXTENSION[ext]
             ~~~~~~~~~^^^^^
KeyError: ''

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 18, in save_image
    image.save(save_path)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2393, in save
    raise ValueError(msg) from e
ValueError: unknown file extension: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 25, in create_question
    ImageFileManager.save_image(image, filename)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 20, in save_image
    raise IOError(f"Unable to save image: {e}")
OSError: Unable to save image: unknown file extension: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in execute
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in <listcomp>
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 66, in _create_question
    return self.question_factory.create_question(image, qnum)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 31, in create_question
    os.remove(question.image_path)
FileNotFoundError: [WinError 2] The system cannot find the file specified: "C:\\Users\\Tariq\\Documents\\birkbeck-project\\None-('0625', '0625')-1695549653258"
2023-09-24 11:02:26,697 - __main__ - INFO - Starting exam extraction...
2023-09-24 11:02:26,747 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:02:26,747 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 11:02:26,751 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 11:02:26,751 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 11:02:26,751 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 11:02:26,752 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 11:02:26,752 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:02:26,752 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 11:02:26,752 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 11:02:26,752 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 11:02:26,752 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:02:26,753 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 11:02:26,753 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 11:02:26,753 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 11:02:26,754 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 11:02:26,754 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 11:02:26,754 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 11:02:28,829 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 11:02:28,834 - root - DEBUG - Exam: <database.models.Exam object at 0x0000018578525A90>
2023-09-24 11:02:28,834 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:02:28,835 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:02:34,551 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\None-('0625', '0625')-1695549754551. qnum: 1
2023-09-24 11:02:34,551 - PIL.Image - DEBUG - Importing BlpImagePlugin
2023-09-24 11:02:34,552 - PIL.Image - DEBUG - Importing BmpImagePlugin
2023-09-24 11:02:34,552 - PIL.Image - DEBUG - Importing BufrStubImagePlugin
2023-09-24 11:02:34,553 - PIL.Image - DEBUG - Importing CurImagePlugin
2023-09-24 11:02:34,554 - PIL.Image - DEBUG - Importing DcxImagePlugin
2023-09-24 11:02:34,555 - PIL.Image - DEBUG - Importing DdsImagePlugin
2023-09-24 11:02:34,555 - PIL.Image - DEBUG - Importing EpsImagePlugin
2023-09-24 11:02:34,581 - PIL.Image - DEBUG - Importing FitsImagePlugin
2023-09-24 11:02:34,582 - PIL.Image - DEBUG - Importing FliImagePlugin
2023-09-24 11:02:34,583 - PIL.Image - DEBUG - Importing FpxImagePlugin
2023-09-24 11:02:34,584 - PIL.Image - DEBUG - Image: failed to import FpxImagePlugin: No module named 'olefile'
2023-09-24 11:02:34,584 - PIL.Image - DEBUG - Importing FtexImagePlugin
2023-09-24 11:02:34,585 - PIL.Image - DEBUG - Importing GbrImagePlugin
2023-09-24 11:02:34,586 - PIL.Image - DEBUG - Importing GifImagePlugin
2023-09-24 11:02:34,586 - PIL.Image - DEBUG - Importing GribStubImagePlugin
2023-09-24 11:02:34,587 - PIL.Image - DEBUG - Importing Hdf5StubImagePlugin
2023-09-24 11:02:34,587 - PIL.Image - DEBUG - Importing IcnsImagePlugin
2023-09-24 11:02:34,589 - PIL.Image - DEBUG - Importing IcoImagePlugin
2023-09-24 11:02:34,589 - PIL.Image - DEBUG - Importing ImImagePlugin
2023-09-24 11:02:34,590 - PIL.Image - DEBUG - Importing ImtImagePlugin
2023-09-24 11:02:34,591 - PIL.Image - DEBUG - Importing IptcImagePlugin
2023-09-24 11:02:34,592 - PIL.Image - DEBUG - Importing JpegImagePlugin
2023-09-24 11:02:34,592 - PIL.Image - DEBUG - Importing Jpeg2KImagePlugin
2023-09-24 11:02:34,592 - PIL.Image - DEBUG - Importing McIdasImagePlugin
2023-09-24 11:02:34,593 - PIL.Image - DEBUG - Importing MicImagePlugin
2023-09-24 11:02:34,593 - PIL.Image - DEBUG - Image: failed to import MicImagePlugin: No module named 'olefile'
2023-09-24 11:02:34,594 - PIL.Image - DEBUG - Importing MpegImagePlugin
2023-09-24 11:02:34,594 - PIL.Image - DEBUG - Importing MpoImagePlugin
2023-09-24 11:02:34,597 - PIL.Image - DEBUG - Importing MspImagePlugin
2023-09-24 11:02:34,598 - PIL.Image - DEBUG - Importing PalmImagePlugin
2023-09-24 11:02:34,599 - PIL.Image - DEBUG - Importing PcdImagePlugin
2023-09-24 11:02:34,600 - PIL.Image - DEBUG - Importing PcxImagePlugin
2023-09-24 11:02:34,600 - PIL.Image - DEBUG - Importing PdfImagePlugin
2023-09-24 11:02:34,604 - PIL.Image - DEBUG - Importing PixarImagePlugin
2023-09-24 11:02:34,605 - PIL.Image - DEBUG - Importing PngImagePlugin
2023-09-24 11:02:34,605 - PIL.Image - DEBUG - Importing PpmImagePlugin
2023-09-24 11:02:34,605 - PIL.Image - DEBUG - Importing PsdImagePlugin
2023-09-24 11:02:34,606 - PIL.Image - DEBUG - Importing QoiImagePlugin
2023-09-24 11:02:34,606 - PIL.Image - DEBUG - Importing SgiImagePlugin
2023-09-24 11:02:34,607 - PIL.Image - DEBUG - Importing SpiderImagePlugin
2023-09-24 11:02:34,608 - PIL.Image - DEBUG - Importing SunImagePlugin
2023-09-24 11:02:34,608 - PIL.Image - DEBUG - Importing TgaImagePlugin
2023-09-24 11:02:34,609 - PIL.Image - DEBUG - Importing TiffImagePlugin
2023-09-24 11:02:34,609 - PIL.Image - DEBUG - Importing WebPImagePlugin
2023-09-24 11:02:34,610 - PIL.Image - DEBUG - Importing WmfImagePlugin
2023-09-24 11:02:34,611 - PIL.Image - DEBUG - Importing XbmImagePlugin
2023-09-24 11:02:34,612 - PIL.Image - DEBUG - Importing XpmImagePlugin
2023-09-24 11:02:34,613 - PIL.Image - DEBUG - Importing XVThumbImagePlugin
2023-09-24 11:02:34,614 - __main__ - ERROR - [WinError 2] The system cannot find the file specified: "C:\\Users\\Tariq\\Documents\\birkbeck-project\\None-('0625', '0625')-1695549754551"
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2390, in save
    format = EXTENSION[ext]
             ~~~~~~~~~^^^^^
KeyError: ''

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 18, in save_image
    image.save(save_path)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2393, in save
    raise ValueError(msg) from e
ValueError: unknown file extension: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 30, in create_question
    ImageFileManager.save_image(image, filename)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 20, in save_image
    raise IOError(f"Unable to save image: {e}")
OSError: Unable to save image: unknown file extension: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in execute
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in <listcomp>
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 66, in _create_question
    return self.question_factory.create_question(image, qnum)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 36, in create_question
    os.remove(question.image_path)
FileNotFoundError: [WinError 2] The system cannot find the file specified: "C:\\Users\\Tariq\\Documents\\birkbeck-project\\None-('0625', '0625')-1695549754551"
2023-09-24 11:04:56,904 - __main__ - INFO - Starting exam extraction...
2023-09-24 11:04:56,956 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:04:56,956 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 11:04:56,960 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 11:04:56,960 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 11:04:56,960 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 11:04:56,961 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 11:04:56,961 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:04:56,961 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 11:04:56,961 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 11:04:56,961 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 11:04:56,962 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:04:56,962 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 11:04:56,962 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 11:04:56,962 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 11:04:56,963 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 11:04:56,963 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 11:04:56,963 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 11:04:59,051 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 11:04:59,056 - root - DEBUG - Exam: <database.models.Exam object at 0x000001B9C09852D0>
2023-09-24 11:04:59,056 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:04:59,057 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:05:04,676 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\None-('0625', '0625')-1695549904675. qnum: 1
2023-09-24 11:05:04,676 - PIL.Image - DEBUG - Importing BlpImagePlugin
2023-09-24 11:05:04,677 - PIL.Image - DEBUG - Importing BmpImagePlugin
2023-09-24 11:05:04,677 - PIL.Image - DEBUG - Importing BufrStubImagePlugin
2023-09-24 11:05:04,678 - PIL.Image - DEBUG - Importing CurImagePlugin
2023-09-24 11:05:04,678 - PIL.Image - DEBUG - Importing DcxImagePlugin
2023-09-24 11:05:04,679 - PIL.Image - DEBUG - Importing DdsImagePlugin
2023-09-24 11:05:04,680 - PIL.Image - DEBUG - Importing EpsImagePlugin
2023-09-24 11:05:04,707 - PIL.Image - DEBUG - Importing FitsImagePlugin
2023-09-24 11:05:04,708 - PIL.Image - DEBUG - Importing FliImagePlugin
2023-09-24 11:05:04,708 - PIL.Image - DEBUG - Importing FpxImagePlugin
2023-09-24 11:05:04,709 - PIL.Image - DEBUG - Image: failed to import FpxImagePlugin: No module named 'olefile'
2023-09-24 11:05:04,709 - PIL.Image - DEBUG - Importing FtexImagePlugin
2023-09-24 11:05:04,710 - PIL.Image - DEBUG - Importing GbrImagePlugin
2023-09-24 11:05:04,711 - PIL.Image - DEBUG - Importing GifImagePlugin
2023-09-24 11:05:04,711 - PIL.Image - DEBUG - Importing GribStubImagePlugin
2023-09-24 11:05:04,712 - PIL.Image - DEBUG - Importing Hdf5StubImagePlugin
2023-09-24 11:05:04,712 - PIL.Image - DEBUG - Importing IcnsImagePlugin
2023-09-24 11:05:04,714 - PIL.Image - DEBUG - Importing IcoImagePlugin
2023-09-24 11:05:04,715 - PIL.Image - DEBUG - Importing ImImagePlugin
2023-09-24 11:05:04,716 - PIL.Image - DEBUG - Importing ImtImagePlugin
2023-09-24 11:05:04,716 - PIL.Image - DEBUG - Importing IptcImagePlugin
2023-09-24 11:05:04,717 - PIL.Image - DEBUG - Importing JpegImagePlugin
2023-09-24 11:05:04,717 - PIL.Image - DEBUG - Importing Jpeg2KImagePlugin
2023-09-24 11:05:04,717 - PIL.Image - DEBUG - Importing McIdasImagePlugin
2023-09-24 11:05:04,718 - PIL.Image - DEBUG - Importing MicImagePlugin
2023-09-24 11:05:04,719 - PIL.Image - DEBUG - Image: failed to import MicImagePlugin: No module named 'olefile'
2023-09-24 11:05:04,719 - PIL.Image - DEBUG - Importing MpegImagePlugin
2023-09-24 11:05:04,720 - PIL.Image - DEBUG - Importing MpoImagePlugin
2023-09-24 11:05:04,724 - PIL.Image - DEBUG - Importing MspImagePlugin
2023-09-24 11:05:04,724 - PIL.Image - DEBUG - Importing PalmImagePlugin
2023-09-24 11:05:04,725 - PIL.Image - DEBUG - Importing PcdImagePlugin
2023-09-24 11:05:04,726 - PIL.Image - DEBUG - Importing PcxImagePlugin
2023-09-24 11:05:04,726 - PIL.Image - DEBUG - Importing PdfImagePlugin
2023-09-24 11:05:04,730 - PIL.Image - DEBUG - Importing PixarImagePlugin
2023-09-24 11:05:04,731 - PIL.Image - DEBUG - Importing PngImagePlugin
2023-09-24 11:05:04,731 - PIL.Image - DEBUG - Importing PpmImagePlugin
2023-09-24 11:05:04,731 - PIL.Image - DEBUG - Importing PsdImagePlugin
2023-09-24 11:05:04,732 - PIL.Image - DEBUG - Importing QoiImagePlugin
2023-09-24 11:05:04,733 - PIL.Image - DEBUG - Importing SgiImagePlugin
2023-09-24 11:05:04,733 - PIL.Image - DEBUG - Importing SpiderImagePlugin
2023-09-24 11:05:04,734 - PIL.Image - DEBUG - Importing SunImagePlugin
2023-09-24 11:05:04,735 - PIL.Image - DEBUG - Importing TgaImagePlugin
2023-09-24 11:05:04,735 - PIL.Image - DEBUG - Importing TiffImagePlugin
2023-09-24 11:05:04,736 - PIL.Image - DEBUG - Importing WebPImagePlugin
2023-09-24 11:05:04,737 - PIL.Image - DEBUG - Importing WmfImagePlugin
2023-09-24 11:05:04,737 - PIL.Image - DEBUG - Importing XbmImagePlugin
2023-09-24 11:05:04,739 - PIL.Image - DEBUG - Importing XpmImagePlugin
2023-09-24 11:05:04,739 - PIL.Image - DEBUG - Importing XVThumbImagePlugin
2023-09-24 11:05:04,740 - __main__ - ERROR - [WinError 2] The system cannot find the file specified: "C:\\Users\\Tariq\\Documents\\birkbeck-project\\None-('0625', '0625')-1695549904675"
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2390, in save
    format = EXTENSION[ext]
             ~~~~~~~~~^^^^^
KeyError: ''

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 18, in save_image
    image.save(save_path)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2393, in save
    raise ValueError(msg) from e
ValueError: unknown file extension: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 30, in create_question
    ImageFileManager.save_image(image, filename)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 20, in save_image
    raise IOError(f"Unable to save image: {e}")
OSError: Unable to save image: unknown file extension: 

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in execute
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in <listcomp>
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 66, in _create_question
    return self.question_factory.create_question(image, qnum)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 36, in create_question
    os.remove(question.image_path)
FileNotFoundError: [WinError 2] The system cannot find the file specified: "C:\\Users\\Tariq\\Documents\\birkbeck-project\\None-('0625', '0625')-1695549904675"
2023-09-24 11:37:24,299 - __main__ - INFO - Starting exam extraction...
2023-09-24 11:37:24,348 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:37:24,348 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 11:37:24,352 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 11:37:24,352 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 11:37:24,353 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 11:37:24,353 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 11:37:24,353 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:37:24,353 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 11:37:24,353 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 11:37:24,354 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 11:37:24,354 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:37:24,354 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 11:37:24,354 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 11:37:24,354 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 11:37:24,355 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 11:37:24,355 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 11:37:24,355 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 11:37:26,448 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 11:37:26,454 - root - DEBUG - Exam: <database.models.Exam object at 0x000001B0B3256810>
2023-09-24 11:37:26,454 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:37:26,454 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:37:32,183 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852183. qnum: 1
2023-09-24 11:37:32,198 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852198. qnum: 2
2023-09-24 11:37:32,205 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852205. qnum: 3
2023-09-24 11:37:32,225 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852225. qnum: 4
2023-09-24 11:37:32,237 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852237. qnum: 5
2023-09-24 11:37:32,262 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852262. qnum: 6
2023-09-24 11:37:32,287 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852287. qnum: 7
2023-09-24 11:37:32,294 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852294. qnum: 8
2023-09-24 11:37:32,312 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852312. qnum: 9
2023-09-24 11:37:32,335 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852335. qnum: 10
2023-09-24 11:37:32,350 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852350. qnum: 11
2023-09-24 11:37:32,361 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852361. qnum: 12
2023-09-24 11:37:32,381 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852381. qnum: 13
2023-09-24 11:37:32,396 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852396. qnum: 14
2023-09-24 11:37:32,406 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852406. qnum: 15
2023-09-24 11:37:32,423 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852423. qnum: 16
2023-09-24 11:37:32,442 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852442. qnum: 17
2023-09-24 11:37:32,459 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852459. qnum: 18
2023-09-24 11:37:32,471 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852471. qnum: 19
2023-09-24 11:37:32,491 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852491. qnum: 20
2023-09-24 11:37:32,505 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852505. qnum: 21
2023-09-24 11:37:32,516 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852516. qnum: 22
2023-09-24 11:37:32,531 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852531. qnum: 23
2023-09-24 11:37:32,548 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852548. qnum: 24
2023-09-24 11:37:32,566 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852566. qnum: 25
2023-09-24 11:37:32,574 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852574. qnum: 26
2023-09-24 11:37:32,587 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852587. qnum: 27
2023-09-24 11:37:32,596 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852596. qnum: 28
2023-09-24 11:37:32,609 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852609. qnum: 29
2023-09-24 11:37:32,629 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852629. qnum: 30
2023-09-24 11:37:32,653 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852653. qnum: 31
2023-09-24 11:37:32,669 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852669. qnum: 32
2023-09-24 11:37:32,684 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852684. qnum: 33
2023-09-24 11:37:32,706 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852705. qnum: 34
2023-09-24 11:37:32,718 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852718. qnum: 35
2023-09-24 11:37:32,745 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852745. qnum: 36
2023-09-24 11:37:32,761 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852761. qnum: 37
2023-09-24 11:37:32,766 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852766. qnum: 38
2023-09-24 11:37:32,777 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852777. qnum: 39
2023-09-24 11:37:32,790 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852790. qnum: 40
2023-09-24 11:37:32,808 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852808. qnum: None
2023-09-24 11:37:32,810 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852810. qnum: None
2023-09-24 11:37:32,814 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852814. qnum: None
2023-09-24 11:37:32,819 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852819. qnum: None
2023-09-24 11:37:32,822 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852822. qnum: None
2023-09-24 11:37:32,826 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852826. qnum: None
2023-09-24 11:37:32,829 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695551852829. qnum: None
2023-09-24 11:37:32,837 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 65, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 28, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 40, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 9, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 11:45:25,114 - __main__ - INFO - Starting exam extraction...
2023-09-24 11:45:25,163 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:45:25,163 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 11:45:25,167 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 11:45:25,167 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 11:45:25,168 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 11:45:25,168 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 11:45:25,168 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:45:25,168 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 11:45:25,168 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 11:45:25,168 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 11:45:25,169 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:45:25,169 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 11:45:25,169 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 11:45:25,169 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 11:45:25,170 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 11:45:25,170 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 11:45:25,170 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 11:45:27,169 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 11:45:27,175 - root - DEBUG - Exam: <database.models.Exam object at 0x000002AE4A741A50>
2023-09-24 11:45:27,175 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:45:27,175 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:45:32,797 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332796. qnum: 1
2023-09-24 11:45:32,812 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332812. qnum: 2
2023-09-24 11:45:32,819 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332819. qnum: 3
2023-09-24 11:45:32,838 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332838. qnum: 4
2023-09-24 11:45:32,851 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332851. qnum: 5
2023-09-24 11:45:32,876 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332876. qnum: 6
2023-09-24 11:45:32,901 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332901. qnum: 7
2023-09-24 11:45:32,909 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332909. qnum: 8
2023-09-24 11:45:32,926 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332926. qnum: 9
2023-09-24 11:45:32,950 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332950. qnum: 10
2023-09-24 11:45:32,959 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332959. qnum: 11
2023-09-24 11:45:32,976 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332976. qnum: 12
2023-09-24 11:45:32,995 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552332995. qnum: 13
2023-09-24 11:45:33,011 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333011. qnum: 14
2023-09-24 11:45:33,024 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333024. qnum: 15
2023-09-24 11:45:33,040 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333040. qnum: 16
2023-09-24 11:45:33,060 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333060. qnum: 17
2023-09-24 11:45:33,075 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333075. qnum: 18
2023-09-24 11:45:33,087 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333087. qnum: 19
2023-09-24 11:45:33,107 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333107. qnum: 20
2023-09-24 11:45:33,121 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333121. qnum: 21
2023-09-24 11:45:33,132 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333132. qnum: 22
2023-09-24 11:45:33,147 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333147. qnum: 23
2023-09-24 11:45:33,164 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333164. qnum: 24
2023-09-24 11:45:33,182 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333182. qnum: 25
2023-09-24 11:45:33,191 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333191. qnum: 26
2023-09-24 11:45:33,204 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333204. qnum: 27
2023-09-24 11:45:33,213 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333213. qnum: 28
2023-09-24 11:45:33,226 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333226. qnum: 29
2023-09-24 11:45:33,246 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333245. qnum: 30
2023-09-24 11:45:33,269 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333269. qnum: 31
2023-09-24 11:45:33,285 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333285. qnum: 32
2023-09-24 11:45:33,301 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333300. qnum: 33
2023-09-24 11:45:33,321 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333321. qnum: 34
2023-09-24 11:45:33,334 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333334. qnum: 35
2023-09-24 11:45:33,361 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333361. qnum: 36
2023-09-24 11:45:33,377 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333377. qnum: 37
2023-09-24 11:45:33,382 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333382. qnum: 38
2023-09-24 11:45:33,393 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333393. qnum: 39
2023-09-24 11:45:33,407 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333407. qnum: 40
2023-09-24 11:45:33,425 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333425. qnum: None
2023-09-24 11:45:33,426 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333426. qnum: None
2023-09-24 11:45:33,430 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333430. qnum: None
2023-09-24 11:45:33,435 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333435. qnum: None
2023-09-24 11:45:33,438 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333438. qnum: None
2023-09-24 11:45:33,442 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333442. qnum: None
2023-09-24 11:45:33,446 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552333446. qnum: None
2023-09-24 11:45:33,453 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 65, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 28, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 40, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 9, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 11:48:18,932 - __main__ - INFO - Starting exam extraction...
2023-09-24 11:48:18,981 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:48:18,982 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 11:48:18,985 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 11:48:18,985 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 11:48:18,986 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 11:48:18,986 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 11:48:18,986 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:48:18,987 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 11:48:18,987 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 11:48:18,987 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 11:48:18,987 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 11:48:18,987 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 11:48:18,987 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 11:48:18,988 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 11:48:18,988 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 11:48:18,988 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 11:48:18,988 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 11:48:21,065 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 11:48:21,071 - root - DEBUG - Exam: <database.models.Exam object at 0x000001EDFF9A1A90>
2023-09-24 11:48:21,071 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:48:21,071 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 11:48:26,766 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506766. qnum: 1
2023-09-24 11:48:26,782 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506782. qnum: 2
2023-09-24 11:48:26,789 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506789. qnum: 3
2023-09-24 11:48:26,808 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506808. qnum: 4
2023-09-24 11:48:26,821 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506821. qnum: 5
2023-09-24 11:48:26,848 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506848. qnum: 6
2023-09-24 11:48:26,873 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506873. qnum: 7
2023-09-24 11:48:26,880 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506880. qnum: 8
2023-09-24 11:48:26,897 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506897. qnum: 9
2023-09-24 11:48:26,920 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506919. qnum: 10
2023-09-24 11:48:26,934 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506934. qnum: 11
2023-09-24 11:48:26,945 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506945. qnum: 12
2023-09-24 11:48:26,964 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506964. qnum: 13
2023-09-24 11:48:26,980 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506980. qnum: 14
2023-09-24 11:48:26,989 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552506989. qnum: 15
2023-09-24 11:48:27,007 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507007. qnum: 16
2023-09-24 11:48:27,026 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507026. qnum: 17
2023-09-24 11:48:27,042 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507042. qnum: 18
2023-09-24 11:48:27,054 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507054. qnum: 19
2023-09-24 11:48:27,073 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507073. qnum: 20
2023-09-24 11:48:27,087 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507087. qnum: 21
2023-09-24 11:48:27,098 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507098. qnum: 22
2023-09-24 11:48:27,114 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507114. qnum: 23
2023-09-24 11:48:27,130 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507130. qnum: 24
2023-09-24 11:48:27,148 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507148. qnum: 25
2023-09-24 11:48:27,157 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507156. qnum: 26
2023-09-24 11:48:27,169 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507169. qnum: 27
2023-09-24 11:48:27,180 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507180. qnum: 28
2023-09-24 11:48:27,194 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507194. qnum: 29
2023-09-24 11:48:27,213 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507213. qnum: 30
2023-09-24 11:48:27,238 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507238. qnum: 31
2023-09-24 11:48:27,254 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507254. qnum: 32
2023-09-24 11:48:27,269 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507269. qnum: 33
2023-09-24 11:48:27,290 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507290. qnum: 34
2023-09-24 11:48:27,303 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507303. qnum: 35
2023-09-24 11:48:27,329 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507329. qnum: 36
2023-09-24 11:48:27,345 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507345. qnum: 37
2023-09-24 11:48:27,350 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507350. qnum: 38
2023-09-24 11:48:27,361 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507361. qnum: 39
2023-09-24 11:48:27,374 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507374. qnum: 40
2023-09-24 11:48:27,391 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507391. qnum: None
2023-09-24 11:48:27,393 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507393. qnum: None
2023-09-24 11:48:27,397 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507397. qnum: None
2023-09-24 11:48:27,401 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507401. qnum: None
2023-09-24 11:48:27,404 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507404. qnum: None
2023-09-24 11:48:27,408 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507408. qnum: None
2023-09-24 11:48:27,412 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695552507412. qnum: None
2023-09-24 11:48:27,419 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 65, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 28, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 40, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 9, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 12:13:36,891 - __main__ - INFO - Starting exam extraction...
2023-09-24 12:13:36,942 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:13:36,942 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 12:13:36,946 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 12:13:36,947 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 12:13:36,947 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 12:13:36,948 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 12:13:36,948 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:13:36,948 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 12:13:36,948 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 12:13:36,948 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 12:13:36,948 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:13:36,948 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 12:13:36,949 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 12:13:36,949 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 12:13:36,949 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 12:13:36,949 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 12:13:36,949 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 12:13:39,039 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 12:13:39,045 - root - DEBUG - Exam: <database.models.Exam object at 0x000002D02BCCDED0>
2023-09-24 12:13:39,045 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 12:13:39,046 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 12:13:44,718 - root - DEBUG - Question image path: C:\Users\Tariq\Documents\birkbeck-project\0625-0625-1695554024718.jpg. qnum: 1
2023-09-24 12:13:44,718 - PIL.Image - DEBUG - Importing BlpImagePlugin
2023-09-24 12:13:44,720 - PIL.Image - DEBUG - Importing BmpImagePlugin
2023-09-24 12:13:44,720 - PIL.Image - DEBUG - Importing BufrStubImagePlugin
2023-09-24 12:13:44,720 - PIL.Image - DEBUG - Importing CurImagePlugin
2023-09-24 12:13:44,721 - PIL.Image - DEBUG - Importing DcxImagePlugin
2023-09-24 12:13:44,722 - PIL.Image - DEBUG - Importing DdsImagePlugin
2023-09-24 12:13:44,723 - PIL.Image - DEBUG - Importing EpsImagePlugin
2023-09-24 12:13:44,749 - PIL.Image - DEBUG - Importing FitsImagePlugin
2023-09-24 12:13:44,750 - PIL.Image - DEBUG - Importing FliImagePlugin
2023-09-24 12:13:44,751 - PIL.Image - DEBUG - Importing FpxImagePlugin
2023-09-24 12:13:44,752 - PIL.Image - DEBUG - Image: failed to import FpxImagePlugin: No module named 'olefile'
2023-09-24 12:13:44,752 - PIL.Image - DEBUG - Importing FtexImagePlugin
2023-09-24 12:13:44,753 - PIL.Image - DEBUG - Importing GbrImagePlugin
2023-09-24 12:13:44,754 - PIL.Image - DEBUG - Importing GifImagePlugin
2023-09-24 12:13:44,754 - PIL.Image - DEBUG - Importing GribStubImagePlugin
2023-09-24 12:13:44,755 - PIL.Image - DEBUG - Importing Hdf5StubImagePlugin
2023-09-24 12:13:44,756 - PIL.Image - DEBUG - Importing IcnsImagePlugin
2023-09-24 12:13:44,758 - PIL.Image - DEBUG - Importing IcoImagePlugin
2023-09-24 12:13:44,759 - PIL.Image - DEBUG - Importing ImImagePlugin
2023-09-24 12:13:44,760 - PIL.Image - DEBUG - Importing ImtImagePlugin
2023-09-24 12:13:44,760 - PIL.Image - DEBUG - Importing IptcImagePlugin
2023-09-24 12:13:44,761 - PIL.Image - DEBUG - Importing JpegImagePlugin
2023-09-24 12:13:44,761 - PIL.Image - DEBUG - Importing Jpeg2KImagePlugin
2023-09-24 12:13:44,761 - PIL.Image - DEBUG - Importing McIdasImagePlugin
2023-09-24 12:13:44,762 - PIL.Image - DEBUG - Importing MicImagePlugin
2023-09-24 12:13:44,763 - PIL.Image - DEBUG - Image: failed to import MicImagePlugin: No module named 'olefile'
2023-09-24 12:13:44,763 - PIL.Image - DEBUG - Importing MpegImagePlugin
2023-09-24 12:13:44,763 - PIL.Image - DEBUG - Importing MpoImagePlugin
2023-09-24 12:13:44,767 - PIL.Image - DEBUG - Importing MspImagePlugin
2023-09-24 12:13:44,767 - PIL.Image - DEBUG - Importing PalmImagePlugin
2023-09-24 12:13:44,768 - PIL.Image - DEBUG - Importing PcdImagePlugin
2023-09-24 12:13:44,769 - PIL.Image - DEBUG - Importing PcxImagePlugin
2023-09-24 12:13:44,769 - PIL.Image - DEBUG - Importing PdfImagePlugin
2023-09-24 12:13:44,774 - PIL.Image - DEBUG - Importing PixarImagePlugin
2023-09-24 12:13:44,775 - PIL.Image - DEBUG - Importing PngImagePlugin
2023-09-24 12:13:44,775 - PIL.Image - DEBUG - Importing PpmImagePlugin
2023-09-24 12:13:44,775 - PIL.Image - DEBUG - Importing PsdImagePlugin
2023-09-24 12:13:44,776 - PIL.Image - DEBUG - Importing QoiImagePlugin
2023-09-24 12:13:44,776 - PIL.Image - DEBUG - Importing SgiImagePlugin
2023-09-24 12:13:44,777 - PIL.Image - DEBUG - Importing SpiderImagePlugin
2023-09-24 12:13:44,778 - PIL.Image - DEBUG - Importing SunImagePlugin
2023-09-24 12:13:44,778 - PIL.Image - DEBUG - Importing TgaImagePlugin
2023-09-24 12:13:44,779 - PIL.Image - DEBUG - Importing TiffImagePlugin
2023-09-24 12:13:44,779 - PIL.Image - DEBUG - Importing WebPImagePlugin
2023-09-24 12:13:44,780 - PIL.Image - DEBUG - Importing WmfImagePlugin
2023-09-24 12:13:44,781 - PIL.Image - DEBUG - Importing XbmImagePlugin
2023-09-24 12:13:44,782 - PIL.Image - DEBUG - Importing XpmImagePlugin
2023-09-24 12:13:44,783 - PIL.Image - DEBUG - Importing XVThumbImagePlugin
2023-09-24 12:13:44,784 - __main__ - ERROR - [WinError 2] The system cannot find the file specified: 'C:\\Users\\Tariq\\Documents\\birkbeck-project\\0625-0625-1695554024718.jpg'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 19, in save_image
    image.save(image_save_path, format=cls.IMAGE_FORMAT)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\PIL\Image.py", line 2400, in save
    save_handler = SAVE[format.upper()]
                   ~~~~^^^^^^^^^^^^^^^^
KeyError: 'JPG'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 34, in create_question
    ImageFileHandler.save_image(image, filename)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\image_file_handler.py", line 21, in save_image
    raise IOError(f"Unable to save image: {e}")
OSError: Unable to save image: 'JPG'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 64, in process
    questions = self._process_questions(db_session, exam, raw_questions)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 45, in _process_questions
    return self.question_manager.execute(db_session, exam, questions_images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in execute
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 89, in <listcomp>
    return [self._create_question(i, q) for i, q in zip(processed_images, question_nums)]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\question_manager.py", line 66, in _create_question
    return self.question_factory.create_question(image, qnum)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\question_factory.py", line 40, in create_question
    os.remove(question.image_path)
FileNotFoundError: [WinError 2] The system cannot find the file specified: 'C:\\Users\\Tariq\\Documents\\birkbeck-project\\0625-0625-1695554024718.jpg'
2023-09-24 12:45:44,641 - __main__ - INFO - Starting exam extraction...
2023-09-24 12:45:44,690 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:45:44,691 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 12:45:44,695 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 12:45:44,695 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 12:45:44,695 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 12:45:44,695 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 12:45:44,696 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:45:44,696 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 12:45:44,696 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 12:45:44,696 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 12:45:44,696 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:45:44,696 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 12:45:44,697 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 12:45:44,697 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 12:45:44,697 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 12:45:44,697 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 12:45:44,698 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 12:45:46,816 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 12:45:46,822 - root - DEBUG - Exam: <database.models.Exam object at 0x0000029C23286690>
2023-09-24 12:45:46,822 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 12:45:46,822 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 12:45:52,496 - root - DEBUG - Question image path: 2016-062511-1695555952496.jpg. qnum: 1
2023-09-24 12:45:52,499 - root - DEBUG - Question image path: 2016-062511-1695555952499.jpg. qnum: 2
2023-09-24 12:45:52,501 - root - DEBUG - Question image path: 2016-062511-1695555952501.jpg. qnum: 3
2023-09-24 12:45:52,505 - root - DEBUG - Question image path: 2016-062511-1695555952505.jpg. qnum: 4
2023-09-24 12:45:52,507 - root - DEBUG - Question image path: 2016-062511-1695555952507.jpg. qnum: 5
2023-09-24 12:45:52,512 - root - DEBUG - Question image path: 2016-062511-1695555952512.jpg. qnum: 6
2023-09-24 12:45:52,516 - root - DEBUG - Question image path: 2016-062511-1695555952516.jpg. qnum: 7
2023-09-24 12:45:52,519 - root - DEBUG - Question image path: 2016-062511-1695555952519.jpg. qnum: 8
2023-09-24 12:45:52,522 - root - DEBUG - Question image path: 2016-062511-1695555952522.jpg. qnum: 9
2023-09-24 12:45:52,526 - root - DEBUG - Question image path: 2016-062511-1695555952526.jpg. qnum: 10
2023-09-24 12:45:52,529 - root - DEBUG - Question image path: 2016-062511-1695555952529.jpg. qnum: 11
2023-09-24 12:45:52,531 - root - DEBUG - Question image path: 2016-062511-1695555952531.jpg. qnum: 12
2023-09-24 12:45:52,534 - root - DEBUG - Question image path: 2016-062511-1695555952534.jpg. qnum: 13
2023-09-24 12:45:52,538 - root - DEBUG - Question image path: 2016-062511-1695555952538.jpg. qnum: 14
2023-09-24 12:45:52,540 - root - DEBUG - Question image path: 2016-062511-1695555952540.jpg. qnum: 15
2023-09-24 12:45:52,543 - root - DEBUG - Question image path: 2016-062511-1695555952543.jpg. qnum: 16
2023-09-24 12:45:52,546 - root - DEBUG - Question image path: 2016-062511-1695555952546.jpg. qnum: 17
2023-09-24 12:45:52,549 - root - DEBUG - Question image path: 2016-062511-1695555952549.jpg. qnum: 18
2023-09-24 12:45:52,551 - root - DEBUG - Question image path: 2016-062511-1695555952551.jpg. qnum: 19
2023-09-24 12:45:52,555 - root - DEBUG - Question image path: 2016-062511-1695555952555.jpg. qnum: 20
2023-09-24 12:45:52,557 - root - DEBUG - Question image path: 2016-062511-1695555952557.jpg. qnum: 21
2023-09-24 12:45:52,559 - root - DEBUG - Question image path: 2016-062511-1695555952559.jpg. qnum: 22
2023-09-24 12:45:52,562 - root - DEBUG - Question image path: 2016-062511-1695555952562.jpg. qnum: 23
2023-09-24 12:45:52,565 - root - DEBUG - Question image path: 2016-062511-1695555952565.jpg. qnum: 24
2023-09-24 12:45:52,569 - root - DEBUG - Question image path: 2016-062511-1695555952568.jpg. qnum: 25
2023-09-24 12:45:52,571 - root - DEBUG - Question image path: 2016-062511-1695555952571.jpg. qnum: 26
2023-09-24 12:45:52,573 - root - DEBUG - Question image path: 2016-062511-1695555952573.jpg. qnum: 27
2023-09-24 12:45:52,575 - root - DEBUG - Question image path: 2016-062511-1695555952575.jpg. qnum: 28
2023-09-24 12:45:52,577 - root - DEBUG - Question image path: 2016-062511-1695555952577.jpg. qnum: 29
2023-09-24 12:45:52,581 - root - DEBUG - Question image path: 2016-062511-1695555952581.jpg. qnum: 30
2023-09-24 12:45:52,585 - root - DEBUG - Question image path: 2016-062511-1695555952585.jpg. qnum: 31
2023-09-24 12:45:52,589 - root - DEBUG - Question image path: 2016-062511-1695555952589.jpg. qnum: 32
2023-09-24 12:45:52,592 - root - DEBUG - Question image path: 2016-062511-1695555952592.jpg. qnum: 33
2023-09-24 12:45:52,596 - root - DEBUG - Question image path: 2016-062511-1695555952596.jpg. qnum: 34
2023-09-24 12:45:52,598 - root - DEBUG - Question image path: 2016-062511-1695555952598.jpg. qnum: 35
2023-09-24 12:45:52,604 - root - DEBUG - Question image path: 2016-062511-1695555952604.jpg. qnum: 36
2023-09-24 12:45:52,607 - root - DEBUG - Question image path: 2016-062511-1695555952607.jpg. qnum: 37
2023-09-24 12:45:52,609 - root - DEBUG - Question image path: 2016-062511-1695555952608.jpg. qnum: 38
2023-09-24 12:45:52,611 - root - DEBUG - Question image path: 2016-062511-1695555952611.jpg. qnum: 39
2023-09-24 12:45:52,613 - root - DEBUG - Question image path: 2016-062511-1695555952613.jpg. qnum: 40
2023-09-24 12:45:52,616 - root - DEBUG - Question image path: 2016-062511-1695555952616.jpg. qnum: None
2023-09-24 12:45:52,618 - root - DEBUG - Question image path: 2016-062511-1695555952617.jpg. qnum: None
2023-09-24 12:45:52,619 - root - DEBUG - Question image path: 2016-062511-1695555952619.jpg. qnum: None
2023-09-24 12:45:52,620 - root - DEBUG - Question image path: 2016-062511-1695555952620.jpg. qnum: None
2023-09-24 12:45:52,621 - root - DEBUG - Question image path: 2016-062511-1695555952621.jpg. qnum: None
2023-09-24 12:45:52,623 - root - DEBUG - Question image path: 2016-062511-1695555952623.jpg. qnum: None
2023-09-24 12:45:52,623 - root - DEBUG - Question image path: 2016-062511-1695555952623.jpg. qnum: None
2023-09-24 12:45:52,629 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 72, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 65, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 28, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 40, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 9, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 12:52:18,489 - __main__ - INFO - Starting exam extraction...
2023-09-24 12:52:18,539 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:52:18,544 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 12:52:18,552 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 12:52:18,553 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 12:52:18,553 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 12:52:18,553 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 12:52:18,553 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:52:18,553 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 12:52:18,554 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 12:52:18,554 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 12:52:18,554 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:52:18,554 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 12:52:18,554 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 12:52:18,554 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 12:52:18,554 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 12:52:18,554 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 12:52:18,554 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 12:52:20,823 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 12:52:20,829 - __main__ - ERROR - (sqlite3.IntegrityError) NOT NULL constraint failed: exams.exam_board
[SQL: INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?)]
[parameters: (None, 'may', '2016', '0625', '11', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: exams.exam_board

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 63, in process
    db_session.flush()
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4179, in flush
    self._flush(objects)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4314, in _flush
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4275, in _flush
    flush_context.execute()
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1226, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1412, in execute
    return meth(
           ^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1844, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1984, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1965, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: exams.exam_board
[SQL: INSERT INTO exams (exam_board, month, year, unit_code, component_code, subject_id) VALUES (?, ?, ?, ?, ?, ?)]
[parameters: (None, 'may', '2016', '0625', '11', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2023-09-24 12:59:41,575 - __main__ - INFO - Starting exam extraction...
2023-09-24 12:59:41,625 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:59:41,626 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 12:59:41,630 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 12:59:41,630 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 12:59:41,630 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 12:59:41,630 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 12:59:41,631 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:59:41,631 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 12:59:41,631 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 12:59:41,631 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 12:59:41,631 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 12:59:41,631 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 12:59:41,631 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 12:59:41,632 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 12:59:41,632 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 12:59:41,632 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 12:59:41,632 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 12:59:43,707 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 12:59:43,713 - root - DEBUG - Exam: <database.models.Exam object at 0x000001D7F0F5F510>
2023-09-24 12:59:43,714 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 12:59:43,714 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 12:59:49,576 - root - DEBUG - Question image path: 2016-062511-1695556789576.jpg. qnum: 1
2023-09-24 12:59:49,579 - root - DEBUG - Question image path: 2016-062511-1695556789579.jpg. qnum: 2
2023-09-24 12:59:49,581 - root - DEBUG - Question image path: 2016-062511-1695556789580.jpg. qnum: 3
2023-09-24 12:59:49,584 - root - DEBUG - Question image path: 2016-062511-1695556789584.jpg. qnum: 4
2023-09-24 12:59:49,586 - root - DEBUG - Question image path: 2016-062511-1695556789586.jpg. qnum: 5
2023-09-24 12:59:49,591 - root - DEBUG - Question image path: 2016-062511-1695556789591.jpg. qnum: 6
2023-09-24 12:59:49,596 - root - DEBUG - Question image path: 2016-062511-1695556789596.jpg. qnum: 7
2023-09-24 12:59:49,598 - root - DEBUG - Question image path: 2016-062511-1695556789598.jpg. qnum: 8
2023-09-24 12:59:49,601 - root - DEBUG - Question image path: 2016-062511-1695556789601.jpg. qnum: 9
2023-09-24 12:59:49,605 - root - DEBUG - Question image path: 2016-062511-1695556789605.jpg. qnum: 10
2023-09-24 12:59:49,607 - root - DEBUG - Question image path: 2016-062511-1695556789607.jpg. qnum: 11
2023-09-24 12:59:49,610 - root - DEBUG - Question image path: 2016-062511-1695556789610.jpg. qnum: 12
2023-09-24 12:59:49,613 - root - DEBUG - Question image path: 2016-062511-1695556789613.jpg. qnum: 13
2023-09-24 12:59:49,616 - root - DEBUG - Question image path: 2016-062511-1695556789616.jpg. qnum: 14
2023-09-24 12:59:49,618 - root - DEBUG - Question image path: 2016-062511-1695556789618.jpg. qnum: 15
2023-09-24 12:59:49,621 - root - DEBUG - Question image path: 2016-062511-1695556789621.jpg. qnum: 16
2023-09-24 12:59:49,625 - root - DEBUG - Question image path: 2016-062511-1695556789625.jpg. qnum: 17
2023-09-24 12:59:49,628 - root - DEBUG - Question image path: 2016-062511-1695556789628.jpg. qnum: 18
2023-09-24 12:59:49,630 - root - DEBUG - Question image path: 2016-062511-1695556789630.jpg. qnum: 19
2023-09-24 12:59:49,634 - root - DEBUG - Question image path: 2016-062511-1695556789634.jpg. qnum: 20
2023-09-24 12:59:49,636 - root - DEBUG - Question image path: 2016-062511-1695556789636.jpg. qnum: 21
2023-09-24 12:59:49,638 - root - DEBUG - Question image path: 2016-062511-1695556789638.jpg. qnum: 22
2023-09-24 12:59:49,641 - root - DEBUG - Question image path: 2016-062511-1695556789641.jpg. qnum: 23
2023-09-24 12:59:49,644 - root - DEBUG - Question image path: 2016-062511-1695556789644.jpg. qnum: 24
2023-09-24 12:59:49,648 - root - DEBUG - Question image path: 2016-062511-1695556789648.jpg. qnum: 25
2023-09-24 12:59:49,650 - root - DEBUG - Question image path: 2016-062511-1695556789650.jpg. qnum: 26
2023-09-24 12:59:49,652 - root - DEBUG - Question image path: 2016-062511-1695556789652.jpg. qnum: 27
2023-09-24 12:59:49,654 - root - DEBUG - Question image path: 2016-062511-1695556789654.jpg. qnum: 28
2023-09-24 12:59:49,657 - root - DEBUG - Question image path: 2016-062511-1695556789657.jpg. qnum: 29
2023-09-24 12:59:49,660 - root - DEBUG - Question image path: 2016-062511-1695556789660.jpg. qnum: 30
2023-09-24 12:59:49,665 - root - DEBUG - Question image path: 2016-062511-1695556789665.jpg. qnum: 31
2023-09-24 12:59:49,668 - root - DEBUG - Question image path: 2016-062511-1695556789668.jpg. qnum: 32
2023-09-24 12:59:49,671 - root - DEBUG - Question image path: 2016-062511-1695556789671.jpg. qnum: 33
2023-09-24 12:59:49,675 - root - DEBUG - Question image path: 2016-062511-1695556789675.jpg. qnum: 34
2023-09-24 12:59:49,678 - root - DEBUG - Question image path: 2016-062511-1695556789678.jpg. qnum: 35
2023-09-24 12:59:49,683 - root - DEBUG - Question image path: 2016-062511-1695556789683.jpg. qnum: 36
2023-09-24 12:59:49,686 - root - DEBUG - Question image path: 2016-062511-1695556789686.jpg. qnum: 37
2023-09-24 12:59:49,688 - root - DEBUG - Question image path: 2016-062511-1695556789688.jpg. qnum: 38
2023-09-24 12:59:49,690 - root - DEBUG - Question image path: 2016-062511-1695556789690.jpg. qnum: 39
2023-09-24 12:59:49,692 - root - DEBUG - Question image path: 2016-062511-1695556789692.jpg. qnum: 40
2023-09-24 12:59:49,696 - root - DEBUG - Question image path: 2016-062511-1695556789696.jpg. qnum: None
2023-09-24 12:59:49,697 - root - DEBUG - Question image path: 2016-062511-1695556789697.jpg. qnum: None
2023-09-24 12:59:49,698 - root - DEBUG - Question image path: 2016-062511-1695556789698.jpg. qnum: None
2023-09-24 12:59:49,699 - root - DEBUG - Question image path: 2016-062511-1695556789699.jpg. qnum: None
2023-09-24 12:59:49,700 - root - DEBUG - Question image path: 2016-062511-1695556789700.jpg. qnum: None
2023-09-24 12:59:49,701 - root - DEBUG - Question image path: 2016-062511-1695556789701.jpg. qnum: None
2023-09-24 12:59:49,702 - root - DEBUG - Question image path: 2016-062511-1695556789702.jpg. qnum: None
2023-09-24 12:59:49,712 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 67, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 28, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 40, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 9, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 13:05:18,891 - __main__ - INFO - Starting exam extraction...
2023-09-24 13:05:18,940 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:05:18,940 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 13:05:18,944 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 13:05:18,944 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 13:05:18,945 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 13:05:18,945 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 13:05:18,945 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:05:18,945 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 13:05:18,945 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 13:05:18,945 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 13:05:18,945 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:05:18,945 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 13:05:18,945 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 13:05:18,946 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 13:05:18,946 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 13:05:18,946 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 13:05:18,946 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 13:05:21,025 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 13:05:21,032 - root - DEBUG - Exam: <database.models.Exam object at 0x00000225FFEF5E50>
2023-09-24 13:05:21,032 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:05:21,032 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:05:26,683 - root - DEBUG - Question image path: 2016-062511-1695557126683.jpg. qnum: 1
2023-09-24 13:05:26,687 - root - DEBUG - Question image path: 2016-062511-1695557126687.jpg. qnum: 2
2023-09-24 13:05:26,688 - root - DEBUG - Question image path: 2016-062511-1695557126688.jpg. qnum: 3
2023-09-24 13:05:26,692 - root - DEBUG - Question image path: 2016-062511-1695557126692.jpg. qnum: 4
2023-09-24 13:05:26,695 - root - DEBUG - Question image path: 2016-062511-1695557126695.jpg. qnum: 5
2023-09-24 13:05:26,700 - root - DEBUG - Question image path: 2016-062511-1695557126700.jpg. qnum: 6
2023-09-24 13:05:26,704 - root - DEBUG - Question image path: 2016-062511-1695557126704.jpg. qnum: 7
2023-09-24 13:05:26,706 - root - DEBUG - Question image path: 2016-062511-1695557126706.jpg. qnum: 8
2023-09-24 13:05:26,709 - root - DEBUG - Question image path: 2016-062511-1695557126708.jpg. qnum: 9
2023-09-24 13:05:26,713 - root - DEBUG - Question image path: 2016-062511-1695557126713.jpg. qnum: 10
2023-09-24 13:05:26,716 - root - DEBUG - Question image path: 2016-062511-1695557126716.jpg. qnum: 11
2023-09-24 13:05:26,718 - root - DEBUG - Question image path: 2016-062511-1695557126718.jpg. qnum: 12
2023-09-24 13:05:26,722 - root - DEBUG - Question image path: 2016-062511-1695557126722.jpg. qnum: 13
2023-09-24 13:05:26,725 - root - DEBUG - Question image path: 2016-062511-1695557126725.jpg. qnum: 14
2023-09-24 13:05:26,727 - root - DEBUG - Question image path: 2016-062511-1695557126727.jpg. qnum: 15
2023-09-24 13:05:26,730 - root - DEBUG - Question image path: 2016-062511-1695557126730.jpg. qnum: 16
2023-09-24 13:05:26,734 - root - DEBUG - Question image path: 2016-062511-1695557126734.jpg. qnum: 17
2023-09-24 13:05:26,737 - root - DEBUG - Question image path: 2016-062511-1695557126737.jpg. qnum: 18
2023-09-24 13:05:26,739 - root - DEBUG - Question image path: 2016-062511-1695557126739.jpg. qnum: 19
2023-09-24 13:05:26,743 - root - DEBUG - Question image path: 2016-062511-1695557126743.jpg. qnum: 20
2023-09-24 13:05:26,746 - root - DEBUG - Question image path: 2016-062511-1695557126746.jpg. qnum: 21
2023-09-24 13:05:26,748 - root - DEBUG - Question image path: 2016-062511-1695557126748.jpg. qnum: 22
2023-09-24 13:05:26,751 - root - DEBUG - Question image path: 2016-062511-1695557126751.jpg. qnum: 23
2023-09-24 13:05:26,754 - root - DEBUG - Question image path: 2016-062511-1695557126754.jpg. qnum: 24
2023-09-24 13:05:26,757 - root - DEBUG - Question image path: 2016-062511-1695557126757.jpg. qnum: 25
2023-09-24 13:05:26,759 - root - DEBUG - Question image path: 2016-062511-1695557126759.jpg. qnum: 26
2023-09-24 13:05:26,762 - root - DEBUG - Question image path: 2016-062511-1695557126762.jpg. qnum: 27
2023-09-24 13:05:26,765 - root - DEBUG - Question image path: 2016-062511-1695557126765.jpg. qnum: 28
2023-09-24 13:05:26,768 - root - DEBUG - Question image path: 2016-062511-1695557126768.jpg. qnum: 29
2023-09-24 13:05:26,771 - root - DEBUG - Question image path: 2016-062511-1695557126771.jpg. qnum: 30
2023-09-24 13:05:26,776 - root - DEBUG - Question image path: 2016-062511-1695557126776.jpg. qnum: 31
2023-09-24 13:05:26,779 - root - DEBUG - Question image path: 2016-062511-1695557126779.jpg. qnum: 32
2023-09-24 13:05:26,783 - root - DEBUG - Question image path: 2016-062511-1695557126783.jpg. qnum: 33
2023-09-24 13:05:26,786 - root - DEBUG - Question image path: 2016-062511-1695557126786.jpg. qnum: 34
2023-09-24 13:05:26,789 - root - DEBUG - Question image path: 2016-062511-1695557126789.jpg. qnum: 35
2023-09-24 13:05:26,794 - root - DEBUG - Question image path: 2016-062511-1695557126794.jpg. qnum: 36
2023-09-24 13:05:26,797 - root - DEBUG - Question image path: 2016-062511-1695557126797.jpg. qnum: 37
2023-09-24 13:05:26,799 - root - DEBUG - Question image path: 2016-062511-1695557126799.jpg. qnum: 38
2023-09-24 13:05:26,801 - root - DEBUG - Question image path: 2016-062511-1695557126801.jpg. qnum: 39
2023-09-24 13:05:26,803 - root - DEBUG - Question image path: 2016-062511-1695557126803.jpg. qnum: 40
2023-09-24 13:05:26,806 - root - DEBUG - Question image path: 2016-062511-1695557126806.jpg. qnum: None
2023-09-24 13:05:26,808 - root - DEBUG - Question image path: 2016-062511-1695557126808.jpg. qnum: None
2023-09-24 13:05:26,809 - root - DEBUG - Question image path: 2016-062511-1695557126809.jpg. qnum: None
2023-09-24 13:05:26,810 - root - DEBUG - Question image path: 2016-062511-1695557126810.jpg. qnum: None
2023-09-24 13:05:26,811 - root - DEBUG - Question image path: 2016-062511-1695557126811.jpg. qnum: None
2023-09-24 13:05:26,813 - root - DEBUG - Question image path: 2016-062511-1695557126813.jpg. qnum: None
2023-09-24 13:05:26,814 - root - DEBUG - Question image path: 2016-062511-1695557126814.jpg. qnum: None
2023-09-24 13:05:26,822 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 13:05:26,823 - root - DEBUG - answer_strA; question: 1
2023-09-24 13:05:26,823 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 67, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 31, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 43, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 13, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 13:06:39,141 - __main__ - INFO - Starting exam extraction...
2023-09-24 13:06:39,189 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:06:39,189 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 13:06:39,193 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 13:06:39,193 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 13:06:39,193 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 13:06:39,194 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 13:06:39,194 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:06:39,194 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 13:06:39,194 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 13:06:39,194 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 13:06:39,194 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:06:39,194 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 13:06:39,194 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 13:06:39,194 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 13:06:39,194 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 13:06:39,195 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 13:06:39,195 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 13:06:41,253 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 13:06:41,260 - root - DEBUG - Exam: <database.models.Exam object at 0x000001528B75F4D0>
2023-09-24 13:06:41,260 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:06:41,260 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:06:46,904 - root - DEBUG - Question image path: 2016-062511-1695557206904.jpg. qnum: 1
2023-09-24 13:06:46,908 - root - DEBUG - Question image path: 2016-062511-1695557206908.jpg. qnum: 2
2023-09-24 13:06:46,909 - root - DEBUG - Question image path: 2016-062511-1695557206909.jpg. qnum: 3
2023-09-24 13:06:46,913 - root - DEBUG - Question image path: 2016-062511-1695557206913.jpg. qnum: 4
2023-09-24 13:06:46,915 - root - DEBUG - Question image path: 2016-062511-1695557206915.jpg. qnum: 5
2023-09-24 13:06:46,920 - root - DEBUG - Question image path: 2016-062511-1695557206920.jpg. qnum: 6
2023-09-24 13:06:46,925 - root - DEBUG - Question image path: 2016-062511-1695557206924.jpg. qnum: 7
2023-09-24 13:06:46,926 - root - DEBUG - Question image path: 2016-062511-1695557206926.jpg. qnum: 8
2023-09-24 13:06:46,929 - root - DEBUG - Question image path: 2016-062511-1695557206929.jpg. qnum: 9
2023-09-24 13:06:46,934 - root - DEBUG - Question image path: 2016-062511-1695557206934.jpg. qnum: 10
2023-09-24 13:06:46,936 - root - DEBUG - Question image path: 2016-062511-1695557206936.jpg. qnum: 11
2023-09-24 13:06:46,939 - root - DEBUG - Question image path: 2016-062511-1695557206939.jpg. qnum: 12
2023-09-24 13:06:46,942 - root - DEBUG - Question image path: 2016-062511-1695557206942.jpg. qnum: 13
2023-09-24 13:06:46,945 - root - DEBUG - Question image path: 2016-062511-1695557206945.jpg. qnum: 14
2023-09-24 13:06:46,948 - root - DEBUG - Question image path: 2016-062511-1695557206947.jpg. qnum: 15
2023-09-24 13:06:46,951 - root - DEBUG - Question image path: 2016-062511-1695557206951.jpg. qnum: 16
2023-09-24 13:06:46,955 - root - DEBUG - Question image path: 2016-062511-1695557206955.jpg. qnum: 17
2023-09-24 13:06:46,958 - root - DEBUG - Question image path: 2016-062511-1695557206958.jpg. qnum: 18
2023-09-24 13:06:46,960 - root - DEBUG - Question image path: 2016-062511-1695557206960.jpg. qnum: 19
2023-09-24 13:06:46,964 - root - DEBUG - Question image path: 2016-062511-1695557206964.jpg. qnum: 20
2023-09-24 13:06:46,967 - root - DEBUG - Question image path: 2016-062511-1695557206967.jpg. qnum: 21
2023-09-24 13:06:46,969 - root - DEBUG - Question image path: 2016-062511-1695557206969.jpg. qnum: 22
2023-09-24 13:06:46,972 - root - DEBUG - Question image path: 2016-062511-1695557206972.jpg. qnum: 23
2023-09-24 13:06:46,975 - root - DEBUG - Question image path: 2016-062511-1695557206975.jpg. qnum: 24
2023-09-24 13:06:46,978 - root - DEBUG - Question image path: 2016-062511-1695557206978.jpg. qnum: 25
2023-09-24 13:06:46,981 - root - DEBUG - Question image path: 2016-062511-1695557206981.jpg. qnum: 26
2023-09-24 13:06:46,983 - root - DEBUG - Question image path: 2016-062511-1695557206983.jpg. qnum: 27
2023-09-24 13:06:46,985 - root - DEBUG - Question image path: 2016-062511-1695557206985.jpg. qnum: 28
2023-09-24 13:06:46,988 - root - DEBUG - Question image path: 2016-062511-1695557206988.jpg. qnum: 29
2023-09-24 13:06:46,992 - root - DEBUG - Question image path: 2016-062511-1695557206992.jpg. qnum: 30
2023-09-24 13:06:46,996 - root - DEBUG - Question image path: 2016-062511-1695557206996.jpg. qnum: 31
2023-09-24 13:06:47,000 - root - DEBUG - Question image path: 2016-062511-1695557207000.jpg. qnum: 32
2023-09-24 13:06:47,003 - root - DEBUG - Question image path: 2016-062511-1695557207003.jpg. qnum: 33
2023-09-24 13:06:47,007 - root - DEBUG - Question image path: 2016-062511-1695557207007.jpg. qnum: 34
2023-09-24 13:06:47,009 - root - DEBUG - Question image path: 2016-062511-1695557207009.jpg. qnum: 35
2023-09-24 13:06:47,014 - root - DEBUG - Question image path: 2016-062511-1695557207014.jpg. qnum: 36
2023-09-24 13:06:47,018 - root - DEBUG - Question image path: 2016-062511-1695557207018.jpg. qnum: 37
2023-09-24 13:06:47,019 - root - DEBUG - Question image path: 2016-062511-1695557207019.jpg. qnum: 38
2023-09-24 13:06:47,021 - root - DEBUG - Question image path: 2016-062511-1695557207021.jpg. qnum: 39
2023-09-24 13:06:47,023 - root - DEBUG - Question image path: 2016-062511-1695557207023.jpg. qnum: 40
2023-09-24 13:06:47,027 - root - DEBUG - Question image path: 2016-062511-1695557207027.jpg. qnum: None
2023-09-24 13:06:47,028 - root - DEBUG - Question image path: 2016-062511-1695557207028.jpg. qnum: None
2023-09-24 13:06:47,029 - root - DEBUG - Question image path: 2016-062511-1695557207029.jpg. qnum: None
2023-09-24 13:06:47,031 - root - DEBUG - Question image path: 2016-062511-1695557207031.jpg. qnum: None
2023-09-24 13:06:47,032 - root - DEBUG - Question image path: 2016-062511-1695557207032.jpg. qnum: None
2023-09-24 13:06:47,033 - root - DEBUG - Question image path: 2016-062511-1695557207033.jpg. qnum: None
2023-09-24 13:06:47,034 - root - DEBUG - Question image path: 2016-062511-1695557207034.jpg. qnum: None
2023-09-24 13:06:47,044 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 13:06:47,044 - root - DEBUG - answer_strA; question: 1
2023-09-24 13:06:47,045 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 67, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 31, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 43, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 13, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 13:46:52,370 - __main__ - INFO - Starting exam extraction...
2023-09-24 13:46:52,419 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:46:52,419 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 13:46:52,423 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 13:46:52,423 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 13:46:52,424 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 13:46:52,424 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 13:46:52,425 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:46:52,425 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 13:46:52,425 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 13:46:52,425 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 13:46:52,425 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:46:52,425 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 13:46:52,425 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 13:46:52,426 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 13:46:52,426 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 13:46:52,426 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 13:46:52,426 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 13:46:54,574 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 13:46:54,581 - root - DEBUG - Exam: <database.models.Exam object at 0x000001B8C0397110>
2023-09-24 13:46:54,581 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:46:54,582 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:47:00,398 - root - DEBUG - Question image path: 2016-062511-1695559620398.jpg. qnum: 1
2023-09-24 13:47:00,401 - root - DEBUG - Question image path: 2016-062511-1695559620401.jpg. qnum: 2
2023-09-24 13:47:00,403 - root - DEBUG - Question image path: 2016-062511-1695559620403.jpg. qnum: 3
2023-09-24 13:47:00,406 - root - DEBUG - Question image path: 2016-062511-1695559620406.jpg. qnum: 4
2023-09-24 13:47:00,409 - root - DEBUG - Question image path: 2016-062511-1695559620409.jpg. qnum: 5
2023-09-24 13:47:00,413 - root - DEBUG - Question image path: 2016-062511-1695559620413.jpg. qnum: 6
2023-09-24 13:47:00,418 - root - DEBUG - Question image path: 2016-062511-1695559620418.jpg. qnum: 7
2023-09-24 13:47:00,420 - root - DEBUG - Question image path: 2016-062511-1695559620420.jpg. qnum: 8
2023-09-24 13:47:00,423 - root - DEBUG - Question image path: 2016-062511-1695559620423.jpg. qnum: 9
2023-09-24 13:47:00,427 - root - DEBUG - Question image path: 2016-062511-1695559620427.jpg. qnum: 10
2023-09-24 13:47:00,430 - root - DEBUG - Question image path: 2016-062511-1695559620430.jpg. qnum: 11
2023-09-24 13:47:00,432 - root - DEBUG - Question image path: 2016-062511-1695559620432.jpg. qnum: 12
2023-09-24 13:47:00,436 - root - DEBUG - Question image path: 2016-062511-1695559620436.jpg. qnum: 13
2023-09-24 13:47:00,439 - root - DEBUG - Question image path: 2016-062511-1695559620439.jpg. qnum: 14
2023-09-24 13:47:00,442 - root - DEBUG - Question image path: 2016-062511-1695559620442.jpg. qnum: 15
2023-09-24 13:47:00,446 - root - DEBUG - Question image path: 2016-062511-1695559620446.jpg. qnum: 16
2023-09-24 13:47:00,449 - root - DEBUG - Question image path: 2016-062511-1695559620449.jpg. qnum: 17
2023-09-24 13:47:00,452 - root - DEBUG - Question image path: 2016-062511-1695559620452.jpg. qnum: 18
2023-09-24 13:47:00,454 - root - DEBUG - Question image path: 2016-062511-1695559620454.jpg. qnum: 19
2023-09-24 13:47:00,458 - root - DEBUG - Question image path: 2016-062511-1695559620458.jpg. qnum: 20
2023-09-24 13:47:00,461 - root - DEBUG - Question image path: 2016-062511-1695559620461.jpg. qnum: 21
2023-09-24 13:47:00,463 - root - DEBUG - Question image path: 2016-062511-1695559620463.jpg. qnum: 22
2023-09-24 13:47:00,466 - root - DEBUG - Question image path: 2016-062511-1695559620466.jpg. qnum: 23
2023-09-24 13:47:00,469 - root - DEBUG - Question image path: 2016-062511-1695559620469.jpg. qnum: 24
2023-09-24 13:47:00,472 - root - DEBUG - Question image path: 2016-062511-1695559620472.jpg. qnum: 25
2023-09-24 13:47:00,474 - root - DEBUG - Question image path: 2016-062511-1695559620474.jpg. qnum: 26
2023-09-24 13:47:00,478 - root - DEBUG - Question image path: 2016-062511-1695559620478.jpg. qnum: 27
2023-09-24 13:47:00,481 - root - DEBUG - Question image path: 2016-062511-1695559620481.jpg. qnum: 28
2023-09-24 13:47:00,485 - root - DEBUG - Question image path: 2016-062511-1695559620485.jpg. qnum: 29
2023-09-24 13:47:00,490 - root - DEBUG - Question image path: 2016-062511-1695559620490.jpg. qnum: 30
2023-09-24 13:47:00,496 - root - DEBUG - Question image path: 2016-062511-1695559620496.jpg. qnum: 31
2023-09-24 13:47:00,500 - root - DEBUG - Question image path: 2016-062511-1695559620500.jpg. qnum: 32
2023-09-24 13:47:00,505 - root - DEBUG - Question image path: 2016-062511-1695559620505.jpg. qnum: 33
2023-09-24 13:47:00,510 - root - DEBUG - Question image path: 2016-062511-1695559620510.jpg. qnum: 34
2023-09-24 13:47:00,514 - root - DEBUG - Question image path: 2016-062511-1695559620514.jpg. qnum: 35
2023-09-24 13:47:00,519 - root - DEBUG - Question image path: 2016-062511-1695559620519.jpg. qnum: 36
2023-09-24 13:47:00,523 - root - DEBUG - Question image path: 2016-062511-1695559620523.jpg. qnum: 37
2023-09-24 13:47:00,525 - root - DEBUG - Question image path: 2016-062511-1695559620525.jpg. qnum: 38
2023-09-24 13:47:00,528 - root - DEBUG - Question image path: 2016-062511-1695559620528.jpg. qnum: 39
2023-09-24 13:47:00,531 - root - DEBUG - Question image path: 2016-062511-1695559620531.jpg. qnum: 40
2023-09-24 13:47:00,534 - root - DEBUG - Question image path: 2016-062511-1695559620534.jpg. qnum: None
2023-09-24 13:47:00,536 - root - DEBUG - Question image path: 2016-062511-1695559620536.jpg. qnum: None
2023-09-24 13:47:00,537 - root - DEBUG - Question image path: 2016-062511-1695559620537.jpg. qnum: None
2023-09-24 13:47:00,538 - root - DEBUG - Question image path: 2016-062511-1695559620538.jpg. qnum: None
2023-09-24 13:47:00,539 - root - DEBUG - Question image path: 2016-062511-1695559620539.jpg. qnum: None
2023-09-24 13:47:00,540 - root - DEBUG - Question image path: 2016-062511-1695559620540.jpg. qnum: None
2023-09-24 13:47:00,542 - root - DEBUG - Question image path: 2016-062511-1695559620542.jpg. qnum: None
2023-09-24 13:47:00,550 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 13:47:00,551 - extraction_engine.managers.answer_manager - DEBUG - question_map: {1: <database.models.Question object at 0x000001B8BED97D50>, 2: <database.models.Question object at 0x000001B8C03ABF50>, 3: <database.models.Question object at 0x000001B8C0035790>, 4: <database.models.Question object at 0x000001B8A0A935D0>, 5: <database.models.Question object at 0x000001B8C00EF890>, 6: <database.models.Question object at 0x000001B8C00EED90>, 7: <database.models.Question object at 0x000001B8C00F8290>, 8: <database.models.Question object at 0x000001B8BEE40450>, 9: <database.models.Question object at 0x000001B8C00F8A50>, 10: <database.models.Question object at 0x000001B8C00EFB10>, 11: <database.models.Question object at 0x000001B8C00F91D0>, 12: <database.models.Question object at 0x000001B8C00F9490>, 13: <database.models.Question object at 0x000001B8C00F9810>, 14: <database.models.Question object at 0x000001B8C00F9B90>, 15: <database.models.Question object at 0x000001B8C00F9F10>, 16: <database.models.Question object at 0x000001B8C00FA110>, 17: <database.models.Question object at 0x000001B8C00FA590>, 18: <database.models.Question object at 0x000001B8C00FA950>, 19: <database.models.Question object at 0x000001B8C00FACD0>, 20: <database.models.Question object at 0x000001B8C03D2C90>, 21: <database.models.Question object at 0x000001B8C00FB3D0>, 22: <database.models.Question object at 0x000001B8C00FB7D0>, 23: <database.models.Question object at 0x000001B8C00FBA50>, 24: <database.models.Question object at 0x000001B8C00FBE10>, 25: <database.models.Question object at 0x000001B8C0104250>, 26: <database.models.Question object at 0x000001B8C0104650>, 27: <database.models.Question object at 0x000001B8C0104A50>, 28: <database.models.Question object at 0x000001B8C0104E10>, 29: <database.models.Question object at 0x000001B8C0341E90>, 30: <database.models.Question object at 0x000001B8C0341D10>, 31: <database.models.Question object at 0x000001B8C0341C10>, 32: <database.models.Question object at 0x000001B8C0341B10>, 33: <database.models.Question object at 0x000001B8C0341690>, 34: <database.models.Question object at 0x000001B8C0341250>, 35: <database.models.Question object at 0x000001B8C03406D0>, 36: <database.models.Question object at 0x000001B8C00EC3D0>, 37: <database.models.Question object at 0x000001B8C0340BD0>, 38: <database.models.Question object at 0x000001B8C020C690>, 39: <database.models.Question object at 0x000001B8C0105250>, 40: <database.models.Question object at 0x000001B8C0105550>, None: <database.models.Question object at 0x000001B8C0106D90>}
2023-09-24 13:47:00,552 - root - DEBUG - answer_strA; question: 1
2023-09-24 13:47:00,553 - __main__ - ERROR - 'answer' is an invalid keyword argument for Answer
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 67, in process
    self._process_answers(db_session, raw_answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 49, in _process_answers
    self.answer_manager.execute(db_session, text, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 31, in execute
    self._match_questions(answers, questions)
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\answer_manager.py", line 44, in _match_questions
    if self.answer_factory: self.answer_factory.create_answer(question, answer_text)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\answer_factory.py", line 13, in create_answer
    answer = Answer(question_id=question.id, answer=correct_answer)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2134, in _declarative_constructor
    raise TypeError(
TypeError: 'answer' is an invalid keyword argument for Answer
2023-09-24 13:48:48,289 - __main__ - INFO - Starting exam extraction...
2023-09-24 13:48:48,337 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:48:48,338 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 13:48:48,341 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 13:48:48,341 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 13:48:48,342 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 13:48:48,342 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 13:48:48,342 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:48:48,342 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 13:48:48,343 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 13:48:48,343 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 13:48:48,343 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 13:48:48,343 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 13:48:48,343 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 13:48:48,343 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 13:48:48,343 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 13:48:48,343 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 13:48:48,343 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 13:48:50,439 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 13:48:50,446 - root - DEBUG - Exam: <database.models.Exam object at 0x000002217FDA7290>
2023-09-24 13:48:50,446 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:48:50,447 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 13:48:56,234 - root - DEBUG - Question image path: 2016-062511-1695559736234.jpg. qnum: 1
2023-09-24 13:48:56,238 - root - DEBUG - Question image path: 2016-062511-1695559736238.jpg. qnum: 2
2023-09-24 13:48:56,239 - root - DEBUG - Question image path: 2016-062511-1695559736239.jpg. qnum: 3
2023-09-24 13:48:56,243 - root - DEBUG - Question image path: 2016-062511-1695559736243.jpg. qnum: 4
2023-09-24 13:48:56,245 - root - DEBUG - Question image path: 2016-062511-1695559736245.jpg. qnum: 5
2023-09-24 13:48:56,250 - root - DEBUG - Question image path: 2016-062511-1695559736250.jpg. qnum: 6
2023-09-24 13:48:56,254 - root - DEBUG - Question image path: 2016-062511-1695559736254.jpg. qnum: 7
2023-09-24 13:48:56,256 - root - DEBUG - Question image path: 2016-062511-1695559736256.jpg. qnum: 8
2023-09-24 13:48:56,259 - root - DEBUG - Question image path: 2016-062511-1695559736259.jpg. qnum: 9
2023-09-24 13:48:56,264 - root - DEBUG - Question image path: 2016-062511-1695559736264.jpg. qnum: 10
2023-09-24 13:48:56,267 - root - DEBUG - Question image path: 2016-062511-1695559736267.jpg. qnum: 11
2023-09-24 13:48:56,269 - root - DEBUG - Question image path: 2016-062511-1695559736269.jpg. qnum: 12
2023-09-24 13:48:56,272 - root - DEBUG - Question image path: 2016-062511-1695559736272.jpg. qnum: 13
2023-09-24 13:48:56,276 - root - DEBUG - Question image path: 2016-062511-1695559736276.jpg. qnum: 14
2023-09-24 13:48:56,278 - root - DEBUG - Question image path: 2016-062511-1695559736278.jpg. qnum: 15
2023-09-24 13:48:56,281 - root - DEBUG - Question image path: 2016-062511-1695559736281.jpg. qnum: 16
2023-09-24 13:48:56,284 - root - DEBUG - Question image path: 2016-062511-1695559736284.jpg. qnum: 17
2023-09-24 13:48:56,287 - root - DEBUG - Question image path: 2016-062511-1695559736287.jpg. qnum: 18
2023-09-24 13:48:56,290 - root - DEBUG - Question image path: 2016-062511-1695559736290.jpg. qnum: 19
2023-09-24 13:48:56,293 - root - DEBUG - Question image path: 2016-062511-1695559736293.jpg. qnum: 20
2023-09-24 13:48:56,295 - root - DEBUG - Question image path: 2016-062511-1695559736295.jpg. qnum: 21
2023-09-24 13:48:56,295 - root - DEBUG - Question image path: 2016-062511-1695559736295.jpg. qnum: 22
2023-09-24 13:48:56,302 - root - DEBUG - Question image path: 2016-062511-1695559736302.jpg. qnum: 23
2023-09-24 13:48:56,305 - root - DEBUG - Question image path: 2016-062511-1695559736305.jpg. qnum: 24
2023-09-24 13:48:56,308 - root - DEBUG - Question image path: 2016-062511-1695559736308.jpg. qnum: 25
2023-09-24 13:48:56,310 - root - DEBUG - Question image path: 2016-062511-1695559736310.jpg. qnum: 26
2023-09-24 13:48:56,313 - root - DEBUG - Question image path: 2016-062511-1695559736313.jpg. qnum: 27
2023-09-24 13:48:56,315 - root - DEBUG - Question image path: 2016-062511-1695559736315.jpg. qnum: 28
2023-09-24 13:48:56,317 - root - DEBUG - Question image path: 2016-062511-1695559736317.jpg. qnum: 29
2023-09-24 13:48:56,321 - root - DEBUG - Question image path: 2016-062511-1695559736321.jpg. qnum: 30
2023-09-24 13:48:56,325 - root - DEBUG - Question image path: 2016-062511-1695559736325.jpg. qnum: 31
2023-09-24 13:48:56,329 - root - DEBUG - Question image path: 2016-062511-1695559736329.jpg. qnum: 32
2023-09-24 13:48:56,332 - root - DEBUG - Question image path: 2016-062511-1695559736332.jpg. qnum: 33
2023-09-24 13:48:56,336 - root - DEBUG - Question image path: 2016-062511-1695559736336.jpg. qnum: 34
2023-09-24 13:48:56,338 - root - DEBUG - Question image path: 2016-062511-1695559736338.jpg. qnum: 35
2023-09-24 13:48:56,343 - root - DEBUG - Question image path: 2016-062511-1695559736343.jpg. qnum: 36
2023-09-24 13:48:56,347 - root - DEBUG - Question image path: 2016-062511-1695559736347.jpg. qnum: 37
2023-09-24 13:48:56,348 - root - DEBUG - Question image path: 2016-062511-1695559736348.jpg. qnum: 38
2023-09-24 13:48:56,350 - root - DEBUG - Question image path: 2016-062511-1695559736350.jpg. qnum: 39
2023-09-24 13:48:56,353 - root - DEBUG - Question image path: 2016-062511-1695559736353.jpg. qnum: 40
2023-09-24 13:48:56,356 - root - DEBUG - Question image path: 2016-062511-1695559736356.jpg. qnum: None
2023-09-24 13:48:56,357 - root - DEBUG - Question image path: 2016-062511-1695559736357.jpg. qnum: None
2023-09-24 13:48:56,358 - root - DEBUG - Question image path: 2016-062511-1695559736358.jpg. qnum: None
2023-09-24 13:48:56,359 - root - DEBUG - Question image path: 2016-062511-1695559736359.jpg. qnum: None
2023-09-24 13:48:56,361 - root - DEBUG - Question image path: 2016-062511-1695559736361.jpg. qnum: None
2023-09-24 13:48:56,362 - root - DEBUG - Question image path: 2016-062511-1695559736362.jpg. qnum: None
2023-09-24 13:48:56,363 - root - DEBUG - Question image path: 2016-062511-1695559736363.jpg. qnum: None
2023-09-24 13:48:56,372 - __main__ - ERROR - (sqlite3.IntegrityError) UNIQUE constraint failed: questions.image_filename
[SQL: INSERT INTO questions (image_filename, question_number, difficulty_id, exam_id) VALUES (?, ?, ?, ?) RETURNING id]
[parameters: ('2016-062511-1695559736295.jpg', 22, None, 6)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2108, in _exec_insertmany_context
    dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: questions.image_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 19, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 66, in process
    db_session.flush()
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4179, in flush
    self._flush(objects)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4314, in _flush
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4275, in _flush
    flush_context.execute()
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1136, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1412, in execute
    return meth(
           ^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_insertmany_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2116, in _exec_insertmany_context
    self._handle_dbapi_exception(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2108, in _exec_insertmany_context
    dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: questions.image_filename
[SQL: INSERT INTO questions (image_filename, question_number, difficulty_id, exam_id) VALUES (?, ?, ?, ?) RETURNING id]
[parameters: ('2016-062511-1695559736295.jpg', 22, None, 6)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2023-09-24 14:08:43,220 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:08:43,268 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:08:43,268 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 14:08:43,272 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:08:43,272 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:08:43,273 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:08:43,273 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:08:43,273 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:08:43,273 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 14:08:43,273 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 14:08:43,273 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:08:43,274 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:08:43,274 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 14:08:43,274 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 14:08:43,274 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:08:43,274 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:08:43,274 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:08:43,274 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:08:45,469 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:08:45,476 - root - DEBUG - Exam: <database.models.Exam object at 0x00000161F332B1D0>
2023-09-24 14:08:45,476 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:08:45,476 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:08:51,284 - root - DEBUG - Question image path: 2016-062511-1695560931284.jpg. qnum: 1
2023-09-24 14:08:51,287 - root - DEBUG - Question image path: 2016-062511-1695560931287.jpg. qnum: 2
2023-09-24 14:08:51,289 - root - DEBUG - Question image path: 2016-062511-1695560931289.jpg. qnum: 3
2023-09-24 14:08:51,292 - root - DEBUG - Question image path: 2016-062511-1695560931292.jpg. qnum: 4
2023-09-24 14:08:51,295 - root - DEBUG - Question image path: 2016-062511-1695560931295.jpg. qnum: 5
2023-09-24 14:08:51,300 - root - DEBUG - Question image path: 2016-062511-1695560931300.jpg. qnum: 6
2023-09-24 14:08:51,305 - root - DEBUG - Question image path: 2016-062511-1695560931305.jpg. qnum: 7
2023-09-24 14:08:51,306 - root - DEBUG - Question image path: 2016-062511-1695560931306.jpg. qnum: 8
2023-09-24 14:08:51,309 - root - DEBUG - Question image path: 2016-062511-1695560931309.jpg. qnum: 9
2023-09-24 14:08:51,314 - root - DEBUG - Question image path: 2016-062511-1695560931314.jpg. qnum: 10
2023-09-24 14:08:51,317 - root - DEBUG - Question image path: 2016-062511-1695560931317.jpg. qnum: 11
2023-09-24 14:08:51,319 - root - DEBUG - Question image path: 2016-062511-1695560931319.jpg. qnum: 12
2023-09-24 14:08:51,322 - root - DEBUG - Question image path: 2016-062511-1695560931322.jpg. qnum: 13
2023-09-24 14:08:51,325 - root - DEBUG - Question image path: 2016-062511-1695560931325.jpg. qnum: 14
2023-09-24 14:08:51,328 - root - DEBUG - Question image path: 2016-062511-1695560931328.jpg. qnum: 15
2023-09-24 14:08:51,331 - root - DEBUG - Question image path: 2016-062511-1695560931331.jpg. qnum: 16
2023-09-24 14:08:51,335 - root - DEBUG - Question image path: 2016-062511-1695560931335.jpg. qnum: 17
2023-09-24 14:08:51,338 - root - DEBUG - Question image path: 2016-062511-1695560931338.jpg. qnum: 18
2023-09-24 14:08:51,340 - root - DEBUG - Question image path: 2016-062511-1695560931340.jpg. qnum: 19
2023-09-24 14:08:51,343 - root - DEBUG - Question image path: 2016-062511-1695560931343.jpg. qnum: 20
2023-09-24 14:08:51,346 - root - DEBUG - Question image path: 2016-062511-1695560931346.jpg. qnum: 21
2023-09-24 14:08:51,348 - root - DEBUG - Question image path: 2016-062511-1695560931348.jpg. qnum: 22
2023-09-24 14:08:51,351 - root - DEBUG - Question image path: 2016-062511-1695560931351.jpg. qnum: 23
2023-09-24 14:08:51,354 - root - DEBUG - Question image path: 2016-062511-1695560931354.jpg. qnum: 24
2023-09-24 14:08:51,357 - root - DEBUG - Question image path: 2016-062511-1695560931357.jpg. qnum: 25
2023-09-24 14:08:51,359 - root - DEBUG - Question image path: 2016-062511-1695560931359.jpg. qnum: 26
2023-09-24 14:08:51,362 - root - DEBUG - Question image path: 2016-062511-1695560931362.jpg. qnum: 27
2023-09-24 14:08:51,364 - root - DEBUG - Question image path: 2016-062511-1695560931364.jpg. qnum: 28
2023-09-24 14:08:51,367 - root - DEBUG - Question image path: 2016-062511-1695560931367.jpg. qnum: 29
2023-09-24 14:08:51,370 - root - DEBUG - Question image path: 2016-062511-1695560931370.jpg. qnum: 30
2023-09-24 14:08:51,375 - root - DEBUG - Question image path: 2016-062511-1695560931375.jpg. qnum: 31
2023-09-24 14:08:51,378 - root - DEBUG - Question image path: 2016-062511-1695560931378.jpg. qnum: 32
2023-09-24 14:08:51,381 - root - DEBUG - Question image path: 2016-062511-1695560931381.jpg. qnum: 33
2023-09-24 14:08:51,385 - root - DEBUG - Question image path: 2016-062511-1695560931385.jpg. qnum: 34
2023-09-24 14:08:51,388 - root - DEBUG - Question image path: 2016-062511-1695560931387.jpg. qnum: 35
2023-09-24 14:08:51,392 - root - DEBUG - Question image path: 2016-062511-1695560931392.jpg. qnum: 36
2023-09-24 14:08:51,396 - root - DEBUG - Question image path: 2016-062511-1695560931396.jpg. qnum: 37
2023-09-24 14:08:51,397 - root - DEBUG - Question image path: 2016-062511-1695560931397.jpg. qnum: 38
2023-09-24 14:08:51,399 - root - DEBUG - Question image path: 2016-062511-1695560931399.jpg. qnum: 39
2023-09-24 14:08:51,402 - root - DEBUG - Question image path: 2016-062511-1695560931402.jpg. qnum: 40
2023-09-24 14:08:51,405 - root - DEBUG - Question image path: 2016-062511-1695560931405.jpg. qnum: None
2023-09-24 14:08:51,406 - root - DEBUG - Question image path: 2016-062511-1695560931406.jpg. qnum: None
2023-09-24 14:08:51,407 - root - DEBUG - Question image path: 2016-062511-1695560931407.jpg. qnum: None
2023-09-24 14:08:51,408 - root - DEBUG - Question image path: 2016-062511-1695560931408.jpg. qnum: None
2023-09-24 14:08:51,409 - root - DEBUG - Question image path: 2016-062511-1695560931409.jpg. qnum: None
2023-09-24 14:08:51,410 - root - DEBUG - Question image path: 2016-062511-1695560931410.jpg. qnum: None
2023-09-24 14:08:51,412 - root - DEBUG - Question image path: 2016-062511-1695560931412.jpg. qnum: None
2023-09-24 14:08:51,421 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 14:08:51,421 - extraction_engine.managers.answer_manager - DEBUG - question_map: {1: <database.models.Question object at 0x00000161F33476D0>, 2: <database.models.Question object at 0x00000161F2FE9690>, 3: <database.models.Question object at 0x00000161F1CE5610>, 4: <database.models.Question object at 0x00000161F306DCD0>, 5: <database.models.Question object at 0x00000161F30A46D0>, 6: <database.models.Question object at 0x00000161F30A40D0>, 7: <database.models.Question object at 0x00000161F30A44D0>, 8: <database.models.Question object at 0x00000161F30A4F10>, 9: <database.models.Question object at 0x00000161F30A5290>, 10: <database.models.Question object at 0x00000161F30A4590>, 11: <database.models.Question object at 0x00000161F30A5790>, 12: <database.models.Question object at 0x00000161F30A5A50>, 13: <database.models.Question object at 0x00000161F30A5D90>, 14: <database.models.Question object at 0x00000161F30A6110>, 15: <database.models.Question object at 0x00000161F30A63D0>, 16: <database.models.Question object at 0x00000161F30A6650>, 17: <database.models.Question object at 0x00000161F30A6910>, 18: <database.models.Question object at 0x00000161F30A6C50>, 19: <database.models.Question object at 0x00000161F30A6FD0>, 20: <database.models.Question object at 0x00000161F30A7310>, 21: <database.models.Question object at 0x00000161F30A7650>, 22: <database.models.Question object at 0x00000161F30A7990>, 23: <database.models.Question object at 0x00000161F30A7C50>, 24: <database.models.Question object at 0x00000161F30A7ED0>, 25: <database.models.Question object at 0x00000161F1DC2010>, 26: <database.models.Question object at 0x00000161F30B0610>, 27: <database.models.Question object at 0x00000161F30B0A50>, 28: <database.models.Question object at 0x00000161F30B0C90>, 29: <database.models.Question object at 0x00000161F33159D0>, 30: <database.models.Question object at 0x00000161F3315B50>, 31: <database.models.Question object at 0x00000161F3315A10>, 32: <database.models.Question object at 0x00000161F3315690>, 33: <database.models.Question object at 0x00000161F3315410>, 34: <database.models.Question object at 0x00000161F3315210>, 35: <database.models.Question object at 0x00000161F3314E90>, 36: <database.models.Question object at 0x00000161F3314D90>, 37: <database.models.Question object at 0x00000161F1CF9710>, 38: <database.models.Question object at 0x00000161F3314ED0>, 39: <database.models.Question object at 0x00000161F318C590>, 40: <database.models.Question object at 0x00000161F30B12D0>, None: <database.models.Question object at 0x00000161F30B2890>}
2023-09-24 14:08:51,422 - root - DEBUG - answer_strA; question: 1
2023-09-24 14:08:51,422 - root - DEBUG - answer_strC; question: 21
2023-09-24 14:08:51,423 - root - DEBUG - answer_strC; question: 2
2023-09-24 14:08:51,423 - root - DEBUG - answer_strA; question: 22
2023-09-24 14:08:51,423 - root - DEBUG - answer_strA; question: 3
2023-09-24 14:08:51,423 - root - DEBUG - answer_strA; question: 23
2023-09-24 14:08:51,423 - root - DEBUG - answer_strA; question: 4
2023-09-24 14:08:51,423 - root - DEBUG - answer_strB; question: 24
2023-09-24 14:08:51,424 - root - DEBUG - answer_strD; question: 5
2023-09-24 14:08:51,424 - root - DEBUG - answer_strB; question: 25
2023-09-24 14:08:51,424 - root - DEBUG - answer_strD; question: 6
2023-09-24 14:08:51,424 - root - DEBUG - answer_strD; question: 26
2023-09-24 14:08:51,424 - root - DEBUG - answer_strD; question: 7
2023-09-24 14:08:51,424 - root - DEBUG - answer_strB; question: 27
2023-09-24 14:08:51,424 - root - DEBUG - answer_strC; question: 8
2023-09-24 14:08:51,425 - root - DEBUG - answer_strC; question: 28
2023-09-24 14:08:51,425 - root - DEBUG - answer_strB; question: 9
2023-09-24 14:08:51,425 - root - DEBUG - answer_strD; question: 29
2023-09-24 14:08:51,425 - root - DEBUG - answer_strB; question: 10
2023-09-24 14:08:51,425 - root - DEBUG - answer_strB; question: 30
2023-09-24 14:08:51,426 - root - DEBUG - answer_strD; question: 11
2023-09-24 14:08:51,426 - root - DEBUG - answer_strA; question: 31
2023-09-24 14:08:51,426 - root - DEBUG - answer_strD; question: 12
2023-09-24 14:08:51,426 - root - DEBUG - answer_strC; question: 32
2023-09-24 14:08:51,426 - root - DEBUG - answer_strB; question: 13
2023-09-24 14:08:51,426 - root - DEBUG - answer_strD; question: 33
2023-09-24 14:08:51,427 - root - DEBUG - answer_strA; question: 14
2023-09-24 14:08:51,427 - root - DEBUG - answer_strA; question: 34
2023-09-24 14:08:51,427 - root - DEBUG - answer_strA; question: 15
2023-09-24 14:08:51,427 - root - DEBUG - answer_strB; question: 35
2023-09-24 14:08:51,428 - root - DEBUG - answer_strC; question: 16
2023-09-24 14:08:51,428 - root - DEBUG - answer_strB; question: 36
2023-09-24 14:08:51,428 - root - DEBUG - answer_strD; question: 17
2023-09-24 14:08:51,428 - root - DEBUG - answer_strB; question: 37
2023-09-24 14:08:51,428 - root - DEBUG - answer_strC; question: 18
2023-09-24 14:08:51,428 - root - DEBUG - answer_strD; question: 38
2023-09-24 14:08:51,429 - root - DEBUG - answer_strB; question: 19
2023-09-24 14:08:51,429 - root - DEBUG - answer_strA; question: 39
2023-09-24 14:08:51,429 - root - DEBUG - answer_strC; question: 20
2023-09-24 14:08:51,429 - root - DEBUG - answer_strB; question: 40
2023-09-24 14:11:00,819 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:11:00,867 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:11:00,868 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 14:11:00,871 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:11:00,872 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:11:00,872 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:11:00,872 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:11:00,872 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:11:00,872 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 14:11:00,873 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 14:11:00,873 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:11:00,873 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:11:00,873 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 14:11:00,873 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 14:11:00,873 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:11:00,873 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:11:00,874 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:11:00,874 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:11:03,048 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:11:03,054 - root - DEBUG - Exam: <database.models.Exam object at 0x000001AC4F512FD0>
2023-09-24 14:11:03,055 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:11:03,055 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:11:08,761 - root - DEBUG - Question image path: 2016-062511-1695561068761.jpg. qnum: 1
2023-09-24 14:11:08,764 - root - DEBUG - Question image path: 2016-062511-1695561068764.jpg. qnum: 2
2023-09-24 14:11:08,766 - root - DEBUG - Question image path: 2016-062511-1695561068766.jpg. qnum: 3
2023-09-24 14:11:08,769 - root - DEBUG - Question image path: 2016-062511-1695561068769.jpg. qnum: 4
2023-09-24 14:11:08,772 - root - DEBUG - Question image path: 2016-062511-1695561068772.jpg. qnum: 5
2023-09-24 14:11:08,777 - root - DEBUG - Question image path: 2016-062511-1695561068777.jpg. qnum: 6
2023-09-24 14:11:08,781 - root - DEBUG - Question image path: 2016-062511-1695561068781.jpg. qnum: 7
2023-09-24 14:11:08,783 - root - DEBUG - Question image path: 2016-062511-1695561068783.jpg. qnum: 8
2023-09-24 14:11:08,786 - root - DEBUG - Question image path: 2016-062511-1695561068786.jpg. qnum: 9
2023-09-24 14:11:08,790 - root - DEBUG - Question image path: 2016-062511-1695561068790.jpg. qnum: 10
2023-09-24 14:11:08,793 - root - DEBUG - Question image path: 2016-062511-1695561068793.jpg. qnum: 11
2023-09-24 14:11:08,795 - root - DEBUG - Question image path: 2016-062511-1695561068795.jpg. qnum: 12
2023-09-24 14:11:08,799 - root - DEBUG - Question image path: 2016-062511-1695561068799.jpg. qnum: 13
2023-09-24 14:11:08,802 - root - DEBUG - Question image path: 2016-062511-1695561068802.jpg. qnum: 14
2023-09-24 14:11:08,804 - root - DEBUG - Question image path: 2016-062511-1695561068804.jpg. qnum: 15
2023-09-24 14:11:08,808 - root - DEBUG - Question image path: 2016-062511-1695561068808.jpg. qnum: 16
2023-09-24 14:11:08,811 - root - DEBUG - Question image path: 2016-062511-1695561068811.jpg. qnum: 17
2023-09-24 14:11:08,814 - root - DEBUG - Question image path: 2016-062511-1695561068814.jpg. qnum: 18
2023-09-24 14:11:08,817 - root - DEBUG - Question image path: 2016-062511-1695561068817.jpg. qnum: 19
2023-09-24 14:11:08,820 - root - DEBUG - Question image path: 2016-062511-1695561068820.jpg. qnum: 20
2023-09-24 14:11:08,823 - root - DEBUG - Question image path: 2016-062511-1695561068823.jpg. qnum: 21
2023-09-24 14:11:08,825 - root - DEBUG - Question image path: 2016-062511-1695561068825.jpg. qnum: 22
2023-09-24 14:11:08,828 - root - DEBUG - Question image path: 2016-062511-1695561068828.jpg. qnum: 23
2023-09-24 14:11:08,831 - root - DEBUG - Question image path: 2016-062511-1695561068831.jpg. qnum: 24
2023-09-24 14:11:08,835 - root - DEBUG - Question image path: 2016-062511-1695561068835.jpg. qnum: 25
2023-09-24 14:11:08,836 - root - DEBUG - Question image path: 2016-062511-1695561068836.jpg. qnum: 26
2023-09-24 14:11:08,839 - root - DEBUG - Question image path: 2016-062511-1695561068839.jpg. qnum: 27
2023-09-24 14:11:08,841 - root - DEBUG - Question image path: 2016-062511-1695561068841.jpg. qnum: 28
2023-09-24 14:11:08,844 - root - DEBUG - Question image path: 2016-062511-1695561068844.jpg. qnum: 29
2023-09-24 14:11:08,848 - root - DEBUG - Question image path: 2016-062511-1695561068848.jpg. qnum: 30
2023-09-24 14:11:08,852 - root - DEBUG - Question image path: 2016-062511-1695561068852.jpg. qnum: 31
2023-09-24 14:11:08,855 - root - DEBUG - Question image path: 2016-062511-1695561068855.jpg. qnum: 32
2023-09-24 14:11:08,859 - root - DEBUG - Question image path: 2016-062511-1695561068859.jpg. qnum: 33
2023-09-24 14:11:08,863 - root - DEBUG - Question image path: 2016-062511-1695561068863.jpg. qnum: 34
2023-09-24 14:11:08,866 - root - DEBUG - Question image path: 2016-062511-1695561068866.jpg. qnum: 35
2023-09-24 14:11:08,871 - root - DEBUG - Question image path: 2016-062511-1695561068871.jpg. qnum: 36
2023-09-24 14:11:08,874 - root - DEBUG - Question image path: 2016-062511-1695561068874.jpg. qnum: 37
2023-09-24 14:11:08,876 - root - DEBUG - Question image path: 2016-062511-1695561068876.jpg. qnum: 38
2023-09-24 14:11:08,878 - root - DEBUG - Question image path: 2016-062511-1695561068878.jpg. qnum: 39
2023-09-24 14:11:08,880 - root - DEBUG - Question image path: 2016-062511-1695561068880.jpg. qnum: 40
2023-09-24 14:11:08,884 - root - DEBUG - Question image path: 2016-062511-1695561068884.jpg. qnum: None
2023-09-24 14:11:08,885 - root - DEBUG - Question image path: 2016-062511-1695561068885.jpg. qnum: None
2023-09-24 14:11:08,886 - root - DEBUG - Question image path: 2016-062511-1695561068886.jpg. qnum: None
2023-09-24 14:11:08,887 - root - DEBUG - Question image path: 2016-062511-1695561068887.jpg. qnum: None
2023-09-24 14:11:08,888 - root - DEBUG - Question image path: 2016-062511-1695561068888.jpg. qnum: None
2023-09-24 14:11:08,889 - root - DEBUG - Question image path: 2016-062511-1695561068889.jpg. qnum: None
2023-09-24 14:11:08,891 - root - DEBUG - Question image path: 2016-062511-1695561068891.jpg. qnum: None
2023-09-24 14:11:08,900 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 14:11:08,900 - extraction_engine.managers.answer_manager - DEBUG - question_map: {1: <database.models.Question object at 0x000001AC2FC5F2D0>, 2: <database.models.Question object at 0x000001AC4F569210>, 3: <database.models.Question object at 0x000001AC4F56AD90>, 4: <database.models.Question object at 0x000001AC4DDD7950>, 5: <database.models.Question object at 0x000001AC4F5A6C90>, 6: <database.models.Question object at 0x000001AC4F2B4C50>, 7: <database.models.Question object at 0x000001AC4F5A50D0>, 8: <database.models.Question object at 0x000001AC4F2B4A50>, 9: <database.models.Question object at 0x000001AC4F2B5050>, 10: <database.models.Question object at 0x000001AC4F5A4350>, 11: <database.models.Question object at 0x000001AC4F2B5690>, 12: <database.models.Question object at 0x000001AC4F2B5950>, 13: <database.models.Question object at 0x000001AC4F2B5C10>, 14: <database.models.Question object at 0x000001AC4F2B5F50>, 15: <database.models.Question object at 0x000001AC4F2B61D0>, 16: <database.models.Question object at 0x000001AC4F2B64D0>, 17: <database.models.Question object at 0x000001AC4F2B6790>, 18: <database.models.Question object at 0x000001AC4F2B6A10>, 19: <database.models.Question object at 0x000001AC4F2B6D10>, 20: <database.models.Question object at 0x000001AC4F2B6FD0>, 21: <database.models.Question object at 0x000001AC4F2B7250>, 22: <database.models.Question object at 0x000001AC4F2B7510>, 23: <database.models.Question object at 0x000001AC4F2B7810>, 24: <database.models.Question object at 0x000001AC4F2B7A50>, 25: <database.models.Question object at 0x000001AC4F2B7DD0>, 26: <database.models.Question object at 0x000001AC4F2B7D50>, 27: <database.models.Question object at 0x000001AC4F2C0450>, 28: <database.models.Question object at 0x000001AC4F2C0690>, 29: <database.models.Question object at 0x000001AC4F50A690>, 30: <database.models.Question object at 0x000001AC4F50A510>, 31: <database.models.Question object at 0x000001AC4F50A7D0>, 32: <database.models.Question object at 0x000001AC4F509A50>, 33: <database.models.Question object at 0x000001AC4F509610>, 34: <database.models.Question object at 0x000001AC4F509010>, 35: <database.models.Question object at 0x000001AC4F508810>, 36: <database.models.Question object at 0x000001AC4F5A4C90>, 37: <database.models.Question object at 0x000001AC4F508350>, 38: <database.models.Question object at 0x000001AC4F1E4610>, 39: <database.models.Question object at 0x000001AC4F508290>, 40: <database.models.Question object at 0x000001AC4F25C4D0>, None: <database.models.Question object at 0x000001AC4F2C1D10>}
2023-09-24 14:11:08,901 - root - DEBUG - answer_strA; question: 1
2023-09-24 14:11:08,902 - root - DEBUG - answer_strC; question: 21
2023-09-24 14:11:08,902 - root - DEBUG - answer_strC; question: 2
2023-09-24 14:11:08,902 - root - DEBUG - answer_strA; question: 22
2023-09-24 14:11:08,902 - root - DEBUG - answer_strA; question: 3
2023-09-24 14:11:08,902 - root - DEBUG - answer_strA; question: 23
2023-09-24 14:11:08,903 - root - DEBUG - answer_strA; question: 4
2023-09-24 14:11:08,903 - root - DEBUG - answer_strB; question: 24
2023-09-24 14:11:08,903 - root - DEBUG - answer_strD; question: 5
2023-09-24 14:11:08,903 - root - DEBUG - answer_strB; question: 25
2023-09-24 14:11:08,903 - root - DEBUG - answer_strD; question: 6
2023-09-24 14:11:08,903 - root - DEBUG - answer_strD; question: 26
2023-09-24 14:11:08,904 - root - DEBUG - answer_strD; question: 7
2023-09-24 14:11:08,904 - root - DEBUG - answer_strB; question: 27
2023-09-24 14:11:08,904 - root - DEBUG - answer_strC; question: 8
2023-09-24 14:11:08,904 - root - DEBUG - answer_strC; question: 28
2023-09-24 14:11:08,904 - root - DEBUG - answer_strB; question: 9
2023-09-24 14:11:08,904 - root - DEBUG - answer_strD; question: 29
2023-09-24 14:11:08,905 - root - DEBUG - answer_strB; question: 10
2023-09-24 14:11:08,905 - root - DEBUG - answer_strB; question: 30
2023-09-24 14:11:08,905 - root - DEBUG - answer_strD; question: 11
2023-09-24 14:11:08,905 - root - DEBUG - answer_strA; question: 31
2023-09-24 14:11:08,906 - root - DEBUG - answer_strD; question: 12
2023-09-24 14:11:08,906 - root - DEBUG - answer_strC; question: 32
2023-09-24 14:11:08,906 - root - DEBUG - answer_strB; question: 13
2023-09-24 14:11:08,906 - root - DEBUG - answer_strD; question: 33
2023-09-24 14:11:08,907 - root - DEBUG - answer_strA; question: 14
2023-09-24 14:11:08,907 - root - DEBUG - answer_strA; question: 34
2023-09-24 14:11:08,907 - root - DEBUG - answer_strA; question: 15
2023-09-24 14:11:08,907 - root - DEBUG - answer_strB; question: 35
2023-09-24 14:11:08,907 - root - DEBUG - answer_strC; question: 16
2023-09-24 14:11:08,907 - root - DEBUG - answer_strB; question: 36
2023-09-24 14:11:08,908 - root - DEBUG - answer_strD; question: 17
2023-09-24 14:11:08,908 - root - DEBUG - answer_strB; question: 37
2023-09-24 14:11:08,908 - root - DEBUG - answer_strC; question: 18
2023-09-24 14:11:08,908 - root - DEBUG - answer_strD; question: 38
2023-09-24 14:11:08,908 - root - DEBUG - answer_strB; question: 19
2023-09-24 14:11:08,909 - root - DEBUG - answer_strA; question: 39
2023-09-24 14:11:08,909 - root - DEBUG - answer_strC; question: 20
2023-09-24 14:11:08,909 - root - DEBUG - answer_strB; question: 40
2023-09-24 14:24:34,947 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:24:35,014 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:24:35,014 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 14:24:35,018 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:24:35,018 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:24:35,019 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:24:35,019 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:24:35,019 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:24:35,019 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 14:24:35,019 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 14:24:35,019 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:24:35,019 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:24:35,019 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 14:24:35,019 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 14:24:35,019 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:24:35,020 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:24:35,020 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:24:35,020 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:24:37,100 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:24:37,107 - root - DEBUG - Exam: <database.models.Exam object at 0x0000022DCEE4A690>
2023-09-24 14:24:37,107 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:24:37,108 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:24:42,789 - root - DEBUG - Question image path: 2016-062511-1695561882789.jpg. qnum: 1
2023-09-24 14:24:42,792 - root - DEBUG - Question image path: 2016-062511-1695561882792.jpg. qnum: 2
2023-09-24 14:24:42,794 - root - DEBUG - Question image path: 2016-062511-1695561882794.jpg. qnum: 3
2023-09-24 14:24:42,797 - root - DEBUG - Question image path: 2016-062511-1695561882797.jpg. qnum: 4
2023-09-24 14:24:42,800 - root - DEBUG - Question image path: 2016-062511-1695561882800.jpg. qnum: 5
2023-09-24 14:24:42,805 - root - DEBUG - Question image path: 2016-062511-1695561882805.jpg. qnum: 6
2023-09-24 14:24:42,810 - root - DEBUG - Question image path: 2016-062511-1695561882810.jpg. qnum: 7
2023-09-24 14:24:42,812 - root - DEBUG - Question image path: 2016-062511-1695561882812.jpg. qnum: 8
2023-09-24 14:24:42,815 - root - DEBUG - Question image path: 2016-062511-1695561882815.jpg. qnum: 9
2023-09-24 14:24:42,819 - root - DEBUG - Question image path: 2016-062511-1695561882819.jpg. qnum: 10
2023-09-24 14:24:42,823 - root - DEBUG - Question image path: 2016-062511-1695561882823.jpg. qnum: 11
2023-09-24 14:24:42,825 - root - DEBUG - Question image path: 2016-062511-1695561882825.jpg. qnum: 12
2023-09-24 14:24:42,829 - root - DEBUG - Question image path: 2016-062511-1695561882828.jpg. qnum: 13
2023-09-24 14:24:42,832 - root - DEBUG - Question image path: 2016-062511-1695561882832.jpg. qnum: 14
2023-09-24 14:24:42,833 - root - DEBUG - Question image path: 2016-062511-1695561882833.jpg. qnum: 15
2023-09-24 14:24:42,837 - root - DEBUG - Question image path: 2016-062511-1695561882837.jpg. qnum: 16
2023-09-24 14:24:42,841 - root - DEBUG - Question image path: 2016-062511-1695561882841.jpg. qnum: 17
2023-09-24 14:24:42,844 - root - DEBUG - Question image path: 2016-062511-1695561882844.jpg. qnum: 18
2023-09-24 14:24:42,846 - root - DEBUG - Question image path: 2016-062511-1695561882846.jpg. qnum: 19
2023-09-24 14:24:42,850 - root - DEBUG - Question image path: 2016-062511-1695561882850.jpg. qnum: 20
2023-09-24 14:24:42,853 - root - DEBUG - Question image path: 2016-062511-1695561882853.jpg. qnum: 21
2023-09-24 14:24:42,855 - root - DEBUG - Question image path: 2016-062511-1695561882855.jpg. qnum: 22
2023-09-24 14:24:42,858 - root - DEBUG - Question image path: 2016-062511-1695561882858.jpg. qnum: 23
2023-09-24 14:24:42,861 - root - DEBUG - Question image path: 2016-062511-1695561882861.jpg. qnum: 24
2023-09-24 14:24:42,864 - root - DEBUG - Question image path: 2016-062511-1695561882864.jpg. qnum: 25
2023-09-24 14:24:42,866 - root - DEBUG - Question image path: 2016-062511-1695561882866.jpg. qnum: 26
2023-09-24 14:24:42,869 - root - DEBUG - Question image path: 2016-062511-1695561882869.jpg. qnum: 27
2023-09-24 14:24:42,871 - root - DEBUG - Question image path: 2016-062511-1695561882871.jpg. qnum: 28
2023-09-24 14:24:42,874 - root - DEBUG - Question image path: 2016-062511-1695561882873.jpg. qnum: 29
2023-09-24 14:24:42,877 - root - DEBUG - Question image path: 2016-062511-1695561882877.jpg. qnum: 30
2023-09-24 14:24:42,881 - root - DEBUG - Question image path: 2016-062511-1695561882881.jpg. qnum: 31
2023-09-24 14:24:42,885 - root - DEBUG - Question image path: 2016-062511-1695561882885.jpg. qnum: 32
2023-09-24 14:24:42,888 - root - DEBUG - Question image path: 2016-062511-1695561882888.jpg. qnum: 33
2023-09-24 14:24:42,892 - root - DEBUG - Question image path: 2016-062511-1695561882892.jpg. qnum: 34
2023-09-24 14:24:42,894 - root - DEBUG - Question image path: 2016-062511-1695561882894.jpg. qnum: 35
2023-09-24 14:24:42,899 - root - DEBUG - Question image path: 2016-062511-1695561882899.jpg. qnum: 36
2023-09-24 14:24:42,902 - root - DEBUG - Question image path: 2016-062511-1695561882902.jpg. qnum: 37
2023-09-24 14:24:42,904 - root - DEBUG - Question image path: 2016-062511-1695561882904.jpg. qnum: 38
2023-09-24 14:24:42,906 - root - DEBUG - Question image path: 2016-062511-1695561882906.jpg. qnum: 39
2023-09-24 14:24:42,909 - root - DEBUG - Question image path: 2016-062511-1695561882909.jpg. qnum: 40
2023-09-24 14:24:42,912 - root - DEBUG - Question image path: 2016-062511-1695561882912.jpg. qnum: None
2023-09-24 14:24:42,913 - root - DEBUG - Question image path: 2016-062511-1695561882913.jpg. qnum: None
2023-09-24 14:24:42,914 - root - DEBUG - Question image path: 2016-062511-1695561882914.jpg. qnum: None
2023-09-24 14:24:42,915 - root - DEBUG - Question image path: 2016-062511-1695561882915.jpg. qnum: None
2023-09-24 14:24:42,916 - root - DEBUG - Question image path: 2016-062511-1695561882916.jpg. qnum: None
2023-09-24 14:24:42,917 - root - DEBUG - Question image path: 2016-062511-1695561882917.jpg. qnum: None
2023-09-24 14:24:42,919 - root - DEBUG - Question image path: 2016-062511-1695561882919.jpg. qnum: None
2023-09-24 14:24:42,927 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 14:24:42,928 - extraction_engine.managers.answer_manager - DEBUG - question_map: {1: <database.models.Question object at 0x0000022DCD6B4F90>, 2: <database.models.Question object at 0x0000022DCEE7A250>, 3: <database.models.Question object at 0x0000022DCEE6AA10>, 4: <database.models.Question object at 0x0000022DCD82B790>, 5: <database.models.Question object at 0x0000022DCEE6AB10>, 6: <database.models.Question object at 0x0000022DCEBAEA50>, 7: <database.models.Question object at 0x0000022DCD7C2A10>, 8: <database.models.Question object at 0x0000022DCEBB83D0>, 9: <database.models.Question object at 0x0000022DCEBB8AD0>, 10: <database.models.Question object at 0x0000022DCEBAF2D0>, 11: <database.models.Question object at 0x0000022DCEBB92D0>, 12: <database.models.Question object at 0x0000022DCEBAE0D0>, 13: <database.models.Question object at 0x0000022DCEBADFD0>, 14: <database.models.Question object at 0x0000022DCEDEDF50>, 15: <database.models.Question object at 0x0000022DCEDEDBD0>, 16: <database.models.Question object at 0x0000022DCEDED950>, 17: <database.models.Question object at 0x0000022DCEBADAD0>, 18: <database.models.Question object at 0x0000022DCEDED310>, 19: <database.models.Question object at 0x0000022DCEDEC750>, 20: <database.models.Question object at 0x0000022DCEDED010>, 21: <database.models.Question object at 0x0000022DCEBB9590>, 22: <database.models.Question object at 0x0000022DCEBB9850>, 23: <database.models.Question object at 0x0000022DCEBB9AD0>, 24: <database.models.Question object at 0x0000022DCEBB9F90>, 25: <database.models.Question object at 0x0000022DCEBBA310>, 26: <database.models.Question object at 0x0000022DCEE7A2D0>, 27: <database.models.Question object at 0x0000022DCEBBAA10>, 28: <database.models.Question object at 0x0000022DCEBBAE10>, 29: <database.models.Question object at 0x0000022DCEBBB050>, 30: <database.models.Question object at 0x0000022DCEBBB450>, 31: <database.models.Question object at 0x0000022DCEBBB6D0>, 32: <database.models.Question object at 0x0000022DCEBBBA90>, 33: <database.models.Question object at 0x0000022DCEBBBE10>, 34: <database.models.Question object at 0x0000022DCEBC8150>, 35: <database.models.Question object at 0x0000022DCEBC8650>, 36: <database.models.Question object at 0x0000022DCEBC89D0>, 37: <database.models.Question object at 0x0000022DCEBC8CD0>, 38: <database.models.Question object at 0x0000022DCEE78B90>, 39: <database.models.Question object at 0x0000022DCEBC9390>, 40: <database.models.Question object at 0x0000022DCEE79310>, None: <database.models.Question object at 0x0000022DCEBBA990>}
2023-09-24 14:24:42,929 - root - DEBUG - answer_strA; question: 1
2023-09-24 14:24:42,930 - root - DEBUG - answer_strC; question: 21
2023-09-24 14:24:42,930 - root - DEBUG - answer_strC; question: 2
2023-09-24 14:24:42,930 - root - DEBUG - answer_strA; question: 22
2023-09-24 14:24:42,930 - root - DEBUG - answer_strA; question: 3
2023-09-24 14:24:42,930 - root - DEBUG - answer_strA; question: 23
2023-09-24 14:24:42,930 - root - DEBUG - answer_strA; question: 4
2023-09-24 14:24:42,931 - root - DEBUG - answer_strB; question: 24
2023-09-24 14:24:42,931 - root - DEBUG - answer_strD; question: 5
2023-09-24 14:24:42,931 - root - DEBUG - answer_strB; question: 25
2023-09-24 14:24:42,931 - root - DEBUG - answer_strD; question: 6
2023-09-24 14:24:42,931 - root - DEBUG - answer_strD; question: 26
2023-09-24 14:24:42,932 - root - DEBUG - answer_strD; question: 7
2023-09-24 14:24:42,932 - root - DEBUG - answer_strB; question: 27
2023-09-24 14:24:42,932 - root - DEBUG - answer_strC; question: 8
2023-09-24 14:24:42,932 - root - DEBUG - answer_strC; question: 28
2023-09-24 14:24:42,932 - root - DEBUG - answer_strB; question: 9
2023-09-24 14:24:42,932 - root - DEBUG - answer_strD; question: 29
2023-09-24 14:24:42,933 - root - DEBUG - answer_strB; question: 10
2023-09-24 14:24:42,933 - root - DEBUG - answer_strB; question: 30
2023-09-24 14:24:42,933 - root - DEBUG - answer_strD; question: 11
2023-09-24 14:24:42,933 - root - DEBUG - answer_strA; question: 31
2023-09-24 14:24:42,933 - root - DEBUG - answer_strD; question: 12
2023-09-24 14:24:42,933 - root - DEBUG - answer_strC; question: 32
2023-09-24 14:24:42,934 - root - DEBUG - answer_strB; question: 13
2023-09-24 14:24:42,934 - root - DEBUG - answer_strD; question: 33
2023-09-24 14:24:42,934 - root - DEBUG - answer_strA; question: 14
2023-09-24 14:24:42,934 - root - DEBUG - answer_strA; question: 34
2023-09-24 14:24:42,934 - root - DEBUG - answer_strA; question: 15
2023-09-24 14:24:42,935 - root - DEBUG - answer_strB; question: 35
2023-09-24 14:24:42,935 - root - DEBUG - answer_strC; question: 16
2023-09-24 14:24:42,935 - root - DEBUG - answer_strB; question: 36
2023-09-24 14:24:42,935 - root - DEBUG - answer_strD; question: 17
2023-09-24 14:24:42,936 - root - DEBUG - answer_strB; question: 37
2023-09-24 14:24:42,936 - root - DEBUG - answer_strC; question: 18
2023-09-24 14:24:42,936 - root - DEBUG - answer_strD; question: 38
2023-09-24 14:24:42,937 - root - DEBUG - answer_strB; question: 19
2023-09-24 14:24:42,937 - root - DEBUG - answer_strA; question: 39
2023-09-24 14:24:42,937 - root - DEBUG - answer_strC; question: 20
2023-09-24 14:24:42,937 - root - DEBUG - answer_strB; question: 40
2023-09-24 14:26:32,840 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:26:32,911 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:26:32,911 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 14:26:32,915 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:26:32,915 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:26:32,916 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:26:32,916 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:26:32,916 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:26:32,916 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 14:26:32,916 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 14:26:32,916 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:26:32,916 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:26:32,916 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 14:26:32,917 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 14:26:32,917 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:26:32,917 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:26:32,917 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:26:32,917 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:26:35,048 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:26:35,052 - root - DEBUG - exam_data['subject']: PHYSICS
2023-09-24 14:26:35,055 - root - DEBUG - Exam: <database.models.Exam object at 0x00000280B73C6550>
2023-09-24 14:26:35,056 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:26:35,056 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:26:40,726 - root - DEBUG - Question image path: 2016-062511-1695562000726.jpg. qnum: 1
2023-09-24 14:26:40,729 - root - DEBUG - Question image path: 2016-062511-1695562000729.jpg. qnum: 2
2023-09-24 14:26:40,731 - root - DEBUG - Question image path: 2016-062511-1695562000731.jpg. qnum: 3
2023-09-24 14:26:40,734 - root - DEBUG - Question image path: 2016-062511-1695562000734.jpg. qnum: 4
2023-09-24 14:26:40,737 - root - DEBUG - Question image path: 2016-062511-1695562000737.jpg. qnum: 5
2023-09-24 14:26:40,742 - root - DEBUG - Question image path: 2016-062511-1695562000742.jpg. qnum: 6
2023-09-24 14:26:40,746 - root - DEBUG - Question image path: 2016-062511-1695562000746.jpg. qnum: 7
2023-09-24 14:26:40,748 - root - DEBUG - Question image path: 2016-062511-1695562000748.jpg. qnum: 8
2023-09-24 14:26:40,751 - root - DEBUG - Question image path: 2016-062511-1695562000751.jpg. qnum: 9
2023-09-24 14:26:40,755 - root - DEBUG - Question image path: 2016-062511-1695562000755.jpg. qnum: 10
2023-09-24 14:26:40,758 - root - DEBUG - Question image path: 2016-062511-1695562000758.jpg. qnum: 11
2023-09-24 14:26:40,761 - root - DEBUG - Question image path: 2016-062511-1695562000761.jpg. qnum: 12
2023-09-24 14:26:40,764 - root - DEBUG - Question image path: 2016-062511-1695562000764.jpg. qnum: 13
2023-09-24 14:26:40,767 - root - DEBUG - Question image path: 2016-062511-1695562000767.jpg. qnum: 14
2023-09-24 14:26:40,769 - root - DEBUG - Question image path: 2016-062511-1695562000769.jpg. qnum: 15
2023-09-24 14:26:40,773 - root - DEBUG - Question image path: 2016-062511-1695562000772.jpg. qnum: 16
2023-09-24 14:26:40,776 - root - DEBUG - Question image path: 2016-062511-1695562000776.jpg. qnum: 17
2023-09-24 14:26:40,779 - root - DEBUG - Question image path: 2016-062511-1695562000779.jpg. qnum: 18
2023-09-24 14:26:40,781 - root - DEBUG - Question image path: 2016-062511-1695562000781.jpg. qnum: 19
2023-09-24 14:26:40,785 - root - DEBUG - Question image path: 2016-062511-1695562000785.jpg. qnum: 20
2023-09-24 14:26:40,787 - root - DEBUG - Question image path: 2016-062511-1695562000787.jpg. qnum: 21
2023-09-24 14:26:40,790 - root - DEBUG - Question image path: 2016-062511-1695562000790.jpg. qnum: 22
2023-09-24 14:26:40,793 - root - DEBUG - Question image path: 2016-062511-1695562000793.jpg. qnum: 23
2023-09-24 14:26:40,796 - root - DEBUG - Question image path: 2016-062511-1695562000796.jpg. qnum: 24
2023-09-24 14:26:40,799 - root - DEBUG - Question image path: 2016-062511-1695562000799.jpg. qnum: 25
2023-09-24 14:26:40,801 - root - DEBUG - Question image path: 2016-062511-1695562000801.jpg. qnum: 26
2023-09-24 14:26:40,803 - root - DEBUG - Question image path: 2016-062511-1695562000803.jpg. qnum: 27
2023-09-24 14:26:40,805 - root - DEBUG - Question image path: 2016-062511-1695562000805.jpg. qnum: 28
2023-09-24 14:26:40,808 - root - DEBUG - Question image path: 2016-062511-1695562000808.jpg. qnum: 29
2023-09-24 14:26:40,812 - root - DEBUG - Question image path: 2016-062511-1695562000812.jpg. qnum: 30
2023-09-24 14:26:40,816 - root - DEBUG - Question image path: 2016-062511-1695562000816.jpg. qnum: 31
2023-09-24 14:26:40,819 - root - DEBUG - Question image path: 2016-062511-1695562000819.jpg. qnum: 32
2023-09-24 14:26:40,822 - root - DEBUG - Question image path: 2016-062511-1695562000822.jpg. qnum: 33
2023-09-24 14:26:40,826 - root - DEBUG - Question image path: 2016-062511-1695562000826.jpg. qnum: 34
2023-09-24 14:26:40,829 - root - DEBUG - Question image path: 2016-062511-1695562000829.jpg. qnum: 35
2023-09-24 14:26:40,834 - root - DEBUG - Question image path: 2016-062511-1695562000834.jpg. qnum: 36
2023-09-24 14:26:40,837 - root - DEBUG - Question image path: 2016-062511-1695562000837.jpg. qnum: 37
2023-09-24 14:26:40,839 - root - DEBUG - Question image path: 2016-062511-1695562000839.jpg. qnum: 38
2023-09-24 14:26:40,841 - root - DEBUG - Question image path: 2016-062511-1695562000841.jpg. qnum: 39
2023-09-24 14:26:40,843 - root - DEBUG - Question image path: 2016-062511-1695562000843.jpg. qnum: 40
2023-09-24 14:26:40,846 - root - DEBUG - Question image path: 2016-062511-1695562000846.jpg. qnum: None
2023-09-24 14:26:40,847 - root - DEBUG - Question image path: 2016-062511-1695562000847.jpg. qnum: None
2023-09-24 14:26:40,848 - root - DEBUG - Question image path: 2016-062511-1695562000848.jpg. qnum: None
2023-09-24 14:26:40,850 - root - DEBUG - Question image path: 2016-062511-1695562000850.jpg. qnum: None
2023-09-24 14:26:40,851 - root - DEBUG - Question image path: 2016-062511-1695562000851.jpg. qnum: None
2023-09-24 14:26:40,852 - root - DEBUG - Question image path: 2016-062511-1695562000852.jpg. qnum: None
2023-09-24 14:26:40,853 - root - DEBUG - Question image path: 2016-062511-1695562000853.jpg. qnum: None
2023-09-24 14:26:40,862 - extraction_engine.managers.answer_manager - DEBUG - Inside AnswerManager and answers: {1: 'A', 21: 'C', 2: 'C', 22: 'A', 3: 'A', 23: 'A', 4: 'A', 24: 'B', 5: 'D', 25: 'B', 6: 'D', 26: 'D', 7: 'D', 27: 'B', 8: 'C', 28: 'C', 9: 'B', 29: 'D', 10: 'B', 30: 'B', 11: 'D', 31: 'A', 12: 'D', 32: 'C', 13: 'B', 33: 'D', 14: 'A', 34: 'A', 15: 'A', 35: 'B', 16: 'C', 36: 'B', 17: 'D', 37: 'B', 18: 'C', 38: 'D', 19: 'B', 39: 'A', 20: 'C', 40: 'B'}
2023-09-24 14:26:40,862 - extraction_engine.managers.answer_manager - DEBUG - question_map: {1: <database.models.Question object at 0x00000280B721ACD0>, 2: <database.models.Question object at 0x0000028097A9F250>, 3: <database.models.Question object at 0x00000280B73B9F10>, 4: <database.models.Question object at 0x00000280B5C49250>, 5: <database.models.Question object at 0x00000280B711B450>, 6: <database.models.Question object at 0x00000280B7124210>, 7: <database.models.Question object at 0x00000280B7124950>, 8: <database.models.Question object at 0x00000280B7124AD0>, 9: <database.models.Question object at 0x00000280B7124ED0>, 10: <database.models.Question object at 0x00000280B711BF10>, 11: <database.models.Question object at 0x00000280B7125510>, 12: <database.models.Question object at 0x00000280B70F0FD0>, 13: <database.models.Question object at 0x00000280B73A5A10>, 14: <database.models.Question object at 0x00000280B73A5990>, 15: <database.models.Question object at 0x00000280B73A5710>, 16: <database.models.Question object at 0x00000280B73A5490>, 17: <database.models.Question object at 0x00000280B73A5290>, 18: <database.models.Question object at 0x00000280B73A5050>, 19: <database.models.Question object at 0x00000280B73A4D90>, 20: <database.models.Question object at 0x00000280B73A49D0>, 21: <database.models.Question object at 0x00000280B7347AD0>, 22: <database.models.Question object at 0x00000280B71257D0>, 23: <database.models.Question object at 0x00000280B7125B50>, 24: <database.models.Question object at 0x00000280B7125E10>, 25: <database.models.Question object at 0x00000280B7126210>, 26: <database.models.Question object at 0x00000280B7126610>, 27: <database.models.Question object at 0x00000280B7126950>, 28: <database.models.Question object at 0x00000280B7126C10>, 29: <database.models.Question object at 0x00000280B7126FD0>, 30: <database.models.Question object at 0x00000280B5E57090>, 31: <database.models.Question object at 0x00000280B7127690>, 32: <database.models.Question object at 0x00000280B7127A50>, 33: <database.models.Question object at 0x00000280B7127C50>, 34: <database.models.Question object at 0x00000280B7127FD0>, 35: <database.models.Question object at 0x00000280B71343D0>, 36: <database.models.Question object at 0x00000280B71347D0>, 37: <database.models.Question object at 0x00000280B7134B50>, 38: <database.models.Question object at 0x00000280B5ECCB10>, 39: <database.models.Question object at 0x00000280B7135250>, 40: <database.models.Question object at 0x00000280B7135590>, None: <database.models.Question object at 0x00000280B7136C90>}
2023-09-24 14:26:40,863 - root - DEBUG - answer_strA; question: 1
2023-09-24 14:26:40,864 - root - DEBUG - answer_strC; question: 21
2023-09-24 14:26:40,864 - root - DEBUG - answer_strC; question: 2
2023-09-24 14:26:40,864 - root - DEBUG - answer_strA; question: 22
2023-09-24 14:26:40,864 - root - DEBUG - answer_strA; question: 3
2023-09-24 14:26:40,864 - root - DEBUG - answer_strA; question: 23
2023-09-24 14:26:40,864 - root - DEBUG - answer_strA; question: 4
2023-09-24 14:26:40,865 - root - DEBUG - answer_strB; question: 24
2023-09-24 14:26:40,865 - root - DEBUG - answer_strD; question: 5
2023-09-24 14:26:40,865 - root - DEBUG - answer_strB; question: 25
2023-09-24 14:26:40,865 - root - DEBUG - answer_strD; question: 6
2023-09-24 14:26:40,865 - root - DEBUG - answer_strD; question: 26
2023-09-24 14:26:40,866 - root - DEBUG - answer_strD; question: 7
2023-09-24 14:26:40,866 - root - DEBUG - answer_strB; question: 27
2023-09-24 14:26:40,866 - root - DEBUG - answer_strC; question: 8
2023-09-24 14:26:40,866 - root - DEBUG - answer_strC; question: 28
2023-09-24 14:26:40,866 - root - DEBUG - answer_strB; question: 9
2023-09-24 14:26:40,866 - root - DEBUG - answer_strD; question: 29
2023-09-24 14:26:40,867 - root - DEBUG - answer_strB; question: 10
2023-09-24 14:26:40,867 - root - DEBUG - answer_strB; question: 30
2023-09-24 14:26:40,867 - root - DEBUG - answer_strD; question: 11
2023-09-24 14:26:40,867 - root - DEBUG - answer_strA; question: 31
2023-09-24 14:26:40,867 - root - DEBUG - answer_strD; question: 12
2023-09-24 14:26:40,867 - root - DEBUG - answer_strC; question: 32
2023-09-24 14:26:40,868 - root - DEBUG - answer_strB; question: 13
2023-09-24 14:26:40,868 - root - DEBUG - answer_strD; question: 33
2023-09-24 14:26:40,868 - root - DEBUG - answer_strA; question: 14
2023-09-24 14:26:40,868 - root - DEBUG - answer_strA; question: 34
2023-09-24 14:26:40,868 - root - DEBUG - answer_strA; question: 15
2023-09-24 14:26:40,869 - root - DEBUG - answer_strB; question: 35
2023-09-24 14:26:40,869 - root - DEBUG - answer_strC; question: 16
2023-09-24 14:26:40,869 - root - DEBUG - answer_strB; question: 36
2023-09-24 14:26:40,869 - root - DEBUG - answer_strD; question: 17
2023-09-24 14:26:40,869 - root - DEBUG - answer_strB; question: 37
2023-09-24 14:26:40,869 - root - DEBUG - answer_strC; question: 18
2023-09-24 14:26:40,870 - root - DEBUG - answer_strD; question: 38
2023-09-24 14:26:40,870 - root - DEBUG - answer_strB; question: 19
2023-09-24 14:26:40,870 - root - DEBUG - answer_strA; question: 39
2023-09-24 14:26:40,870 - root - DEBUG - answer_strC; question: 20
2023-09-24 14:26:40,870 - root - DEBUG - answer_strB; question: 40
2023-09-24 14:28:47,393 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:28:47,459 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:28:47,459 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 14:28:47,463 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:28:47,463 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:28:47,464 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:28:47,464 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:28:47,464 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:28:47,464 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 14:28:47,464 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 14:28:47,464 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:28:47,464 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:28:47,464 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 14:28:47,464 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 14:28:47,464 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:28:47,465 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:28:47,465 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:28:47,465 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:28:49,560 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:28:49,564 - root - DEBUG - exam_data['subject']: PHYSICS
2023-09-24 14:28:49,567 - root - DEBUG - Exam: <database.models.Exam object at 0x00000212D922A9D0>
2023-09-24 14:28:49,567 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:28:49,568 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:28:55,362 - __main__ - ERROR - (sqlite3.IntegrityError) UNIQUE constraint failed: questions.image_filename
[SQL: INSERT INTO questions (image_filename, question_number, difficulty_id, exam_id) VALUES (?, ?, ?, ?) RETURNING id]
[parameters: ('2016-062511-1695562135349.jpg', None, None, 6)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2108, in _exec_insertmany_context
    dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: questions.image_filename

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'phys-062511-may2016.pdf', 'phys-062511-may2016-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 66, in process
    db_session.flush()
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4179, in flush
    self._flush(objects)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4314, in _flush
    with util.safe_reraise():
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\session.py", line 4275, in _flush
    flush_context.execute()
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1136, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1412, in execute
    return meth(
           ^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_insertmany_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2116, in _exec_insertmany_context
    self._handle_dbapi_exception(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2339, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\base.py", line 2108, in _exec_insertmany_context
    dialect.do_execute(
  File "C:\Users\Tariq\Documents\birkbeck-project\project-env\Lib\site-packages\sqlalchemy\engine\default.py", line 921, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: questions.image_filename
[SQL: INSERT INTO questions (image_filename, question_number, difficulty_id, exam_id) VALUES (?, ?, ?, ?) RETURNING id]
[parameters: ('2016-062511-1695562135349.jpg', None, None, 6)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2023-09-24 14:39:09,958 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:39:10,024 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:39:10,024 - root - DEBUG - ConfigManager.__new__ config_path: C:\Users\Tariq\Documents\birkbeck-project\config\config.yaml
2023-09-24 14:39:10,028 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:39:10,028 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:39:10,028 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:39:10,028 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:39:10,029 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:39:10,029 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, coverpage_settings
2023-09-24 14:39:10,029 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctcoverpage_settings, efcambridge_science
2023-09-24 14:39:10,029 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:39:10,029 - root - DEBUG - ConfigManager.__new__ called
2023-09-24 14:39:10,029 - extraction_engine.managers.config_manager - DEBUG - ConfigManager.get_config called with ef: cambridge_science, exam_formats
2023-09-24 14:39:10,029 - extraction_engine.managers.config_manager - DEBUG - inside 3rd if: ctexam_formats, efcambridge_science
2023-09-24 14:39:10,029 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:39:10,029 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:39:10,029 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:39:10,029 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:39:12,154 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:39:12,159 - root - DEBUG - exam_data['subject']: PHYSICS
2023-09-24 14:39:12,162 - root - DEBUG - Exam: <database.models.Exam object at 0x000002022089B690>
2023-09-24 14:39:12,162 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:39:12,162 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:40:50,503 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:40:50,572 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:40:50,572 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:40:50,573 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:40:50,573 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:40:50,573 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:40:50,573 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:40:50,573 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:40:50,573 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:40:50,573 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:40:52,688 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:40:52,692 - root - DEBUG - exam_data['subject']: PHYSICS
2023-09-24 14:40:52,696 - root - DEBUG - Exam: <database.models.Exam object at 0x000001DC79B8A490>
2023-09-24 14:40:52,696 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:40:52,696 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:42:42,453 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:42:42,524 - root - DEBUG - self._config in ConfigManager: {'exam_formats': {'cambridge_science': {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}, 'aqa_maths': {'imageProcessor': None, 'OCRProcessor': None}}, 'coverpage_settings': {'cambridge_science': {'regexes': {'exam_board': '\\b(Cambridge)\\b', 'subject': '\\b([A-Z]{6,})\\b', 'unit_code': '\\b(\\d{4})\\/\\d{2}\\b', 'component_code': '\\b\\d{4}\\/(\\d{2})\\b', 'month': '\\b([A-Z]{1}[a-z]+)\\/?[A-Z]{1}[a-z]+\\s20\\d{2}\\b', 'year': '\\bUCLES\\s+(\\d{4})\\b', 'answer': '(MARK SCHEME)'}}, 'example': {'regexes': {'subject': None, 'unit_code': None, 'component_code': None, 'month': None, 'year': None, 'type': None}}}}
2023-09-24 14:42:42,524 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:42:42,524 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:42:42,525 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:42:42,525 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:42:42,525 - root - DEBUG - self.config in QuestionManager: {'imageProcessor': {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}, 'textProcessor': {'question_x_start': 100, 'question_y_start': 40, 'question_x_end': 190, 'question_y_end': 100, 'tesseract_psm_mode': 7}}
2023-09-24 14:42:42,525 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:42:42,526 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:42:42,526 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:42:44,606 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:42:44,610 - root - DEBUG - exam_data['subject']: PHYSICS
2023-09-24 14:42:44,613 - root - DEBUG - Exam: <database.models.Exam object at 0x000001D3DDF17DD0>
2023-09-24 14:42:44,613 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:42:44,613 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:51:52,382 - __main__ - INFO - Starting exam extraction...
2023-09-24 14:51:52,455 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 14:51:52,456 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 14:51:52,456 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 14:51:52,456 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 14:51:52,456 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 14:51:52,456 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 14:51:52,456 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 14:51:54,585 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'Cambridge', 'subject': 'PHYSICS', 'unit_code': '0625', 'component_code': '11', 'month': 'May', 'year': '2016', 'answer': None}
2023-09-24 14:51:54,593 - root - DEBUG - Exam: <database.models.Exam object at 0x0000023E65CCAA50>
2023-09-24 14:51:54,593 - root - DEBUG - Executing question processing pipeline
2023-09-24 14:51:54,593 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 14:51:54,593 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 15:01:02,039 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:01:02,121 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:01:02,122 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:01:02,122 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:01:02,122 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:01:02,122 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:01:02,122 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:01:02,122 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:01:02,211 - __main__ - ERROR - Error with input pdf files: The cover pages do not match for year.
They are: 2010, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 43, in extract_pdf_data
    cover_details = self.cover_page_extractor.validate_cover_pages_match(q_cover_text, a_cover_text)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_cover_extractor.py", line 43, in validate_cover_pages_match
    raise ValueError(f"The cover pages do not match for {key}.\n" \
ValueError: The cover pages do not match for year.
They are: 2010, and None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 55, in process
    data = self._extract_data_from_pdfs()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 41, in _extract_data_from_pdfs
    return self.pdf_manager.extract_pdf_data(self.question_pdf_path, self.answer_pdf_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 51, in extract_pdf_data
    raise Exception(f"Error with input pdf files: {e}" \
Exception: Error with input pdf files: The cover pages do not match for year.
They are: 2010, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
2023-09-24 15:07:56,841 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:07:56,912 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:07:56,912 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:07:56,912 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:07:56,913 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:07:56,913 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:07:56,913 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:07:56,913 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:07:56,981 - root - DEBUG - question_data: {'exam_board': None, 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': None, 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': True}
2023-09-24 15:07:56,982 - __main__ - ERROR - Error with input pdf files: The cover pages do not match for year.
They are: 2010, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 43, in extract_pdf_data
    cover_details = self.cover_page_extractor.validate_cover_pages_match(q_cover_text, a_cover_text)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_cover_extractor.py", line 44, in validate_cover_pages_match
    raise ValueError(f"The cover pages do not match for {key}.\n" \
ValueError: The cover pages do not match for year.
They are: 2010, and None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 55, in process
    data = self._extract_data_from_pdfs()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 41, in _extract_data_from_pdfs
    return self.pdf_manager.extract_pdf_data(self.question_pdf_path, self.answer_pdf_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 51, in extract_pdf_data
    raise Exception(f"Error with input pdf files: {e}" \
Exception: Error with input pdf files: The cover pages do not match for year.
They are: 2010, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
2023-09-24 15:41:45,277 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:41:45,354 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:41:45,355 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:41:45,355 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:41:45,355 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:41:45,355 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:41:45,355 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:41:45,355 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:41:45,422 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': True}
2023-09-24 15:41:45,423 - __main__ - ERROR - Error with input pdf files: The cover pages do not match for year.
They are: 2010, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 43, in extract_pdf_data
    cover_details = self.cover_page_extractor.validate_cover_pages_match(q_cover_text, a_cover_text)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_cover_extractor.py", line 44, in validate_cover_pages_match
    raise ValueError(f"The cover pages do not match for {key}.\n" \
ValueError: The cover pages do not match for year.
They are: 2010, and None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 55, in process
    data = self._extract_data_from_pdfs()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 41, in _extract_data_from_pdfs
    return self.pdf_manager.extract_pdf_data(self.question_pdf_path, self.answer_pdf_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 51, in extract_pdf_data
    raise Exception(f"Error with input pdf files: {e}" \
Exception: Error with input pdf files: The cover pages do not match for year.
They are: 2010, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
2023-09-24 15:44:08,657 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:44:08,737 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:44:08,737 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:44:08,737 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:44:08,738 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:44:08,738 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:44:08,738 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:44:08,738 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:44:08,807 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': True}
2023-09-24 15:44:11,105 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': None}
2023-09-24 15:44:11,111 - __main__ - ERROR - 'NoneType' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 62, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 36, in _get_or_create_exam
    exam = exam_factory.get_or_create_exam(session=db_session, input_data=exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 19, in get_or_create_exam
    exam_data = self._normalise_exam_data(session, input_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 14, in _normalise_exam_data
    exam_data["subject_id"] = subject.id
                              ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2023-09-24 15:45:05,267 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:45:05,346 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:45:05,347 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:45:05,347 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:45:05,347 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:45:05,347 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:45:05,348 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:45:05,348 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:45:05,417 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': True}
2023-09-24 15:45:07,583 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': None, 'answer': None}
2023-09-24 15:45:07,588 - __main__ - ERROR - 'NoneType' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 62, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 36, in _get_or_create_exam
    exam = exam_factory.get_or_create_exam(session=db_session, input_data=exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 19, in get_or_create_exam
    exam_data = self._normalise_exam_data(session, input_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 14, in _normalise_exam_data
    exam_data["subject_id"] = subject.id
                              ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2023-09-24 15:47:03,972 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:47:04,049 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:47:04,049 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:47:04,049 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:47:04,049 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:47:04,049 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:47:04,050 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:47:04,050 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:47:04,117 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': True}
2023-09-24 15:47:06,273 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'UNIVERSITY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
2023-09-24 15:47:06,279 - __main__ - ERROR - 'NoneType' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 62, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 36, in _get_or_create_exam
    exam = exam_factory.get_or_create_exam(session=db_session, input_data=exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 19, in get_or_create_exam
    exam_data = self._normalise_exam_data(session, input_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 14, in _normalise_exam_data
    exam_data["subject_id"] = subject.id
                              ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2023-09-24 15:48:49,905 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:48:50,124 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:48:50,125 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:48:50,125 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:48:50,125 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:48:50,125 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:48:50,125 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:48:50,125 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:48:50,192 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'CAMBRIDGE', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'CAMBRIDGE', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': True}
2023-09-24 15:48:52,233 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'CAMBRIDGE', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
2023-09-24 15:48:52,239 - __main__ - ERROR - 'NoneType' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 62, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 36, in _get_or_create_exam
    exam = exam_factory.get_or_create_exam(session=db_session, input_data=exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 19, in get_or_create_exam
    exam_data = self._normalise_exam_data(session, input_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\factories\exam_factory.py", line 14, in _normalise_exam_data
    exam_data["subject_id"] = subject.id
                              ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2023-09-24 15:50:33,067 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:50:33,211 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:50:33,211 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:50:33,211 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:50:33,212 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:50:33,212 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:50:33,212 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:50:33,212 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:50:33,280 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'B', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': None, 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': True}
2023-09-24 15:50:33,280 - __main__ - ERROR - Error with input pdf files: The cover pages do not match for subject.
They are: B, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 43, in extract_pdf_data
    cover_details = self.cover_page_extractor.validate_cover_pages_match(q_cover_text, a_cover_text)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_cover_extractor.py", line 44, in validate_cover_pages_match
    raise ValueError(f"The cover pages do not match for {key}.\n" \
ValueError: The cover pages do not match for subject.
They are: B, and None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 20, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 55, in process
    data = self._extract_data_from_pdfs()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 41, in _extract_data_from_pdfs
    return self.pdf_manager.extract_pdf_data(self.question_pdf_path, self.answer_pdf_path)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\pdf_processing\pdf_manager.py", line 51, in extract_pdf_data
    raise Exception(f"Error with input pdf files: {e}" \
Exception: Error with input pdf files: The cover pages do not match for subject.
They are: B, and None
Input: Question PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010.pdf, Answer PDF: C:/Users/Tariq/Documents/birkbeck-project/uploads/bio-may2010-ms.pdf
2023-09-24 15:52:27,992 - __main__ - INFO - Starting exam extraction...
2023-09-24 15:52:28,139 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-24 15:52:28,139 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-24 15:52:28,139 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-24 15:52:28,139 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-24 15:52:28,139 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-24 15:52:28,140 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-24 15:52:28,140 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-24 15:52:28,208 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': True}
2023-09-24 15:52:30,402 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
2023-09-24 15:52:30,409 - root - DEBUG - Exam: <database.models.Exam object at 0x0000016823FDD910>
2023-09-24 15:52:30,409 - root - DEBUG - Executing question processing pipeline
2023-09-24 15:52:30,409 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 15:52:30,410 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-24 15:52:30,963 - root - DEBUG - Post processing image
2023-09-24 15:52:31,076 - root - DEBUG - Post processing image
2023-09-24 15:52:31,191 - root - DEBUG - Post processing image
2023-09-24 15:52:31,305 - root - DEBUG - Post processing image
2023-09-24 15:52:31,420 - root - DEBUG - Post processing image
2023-09-24 15:52:31,530 - root - DEBUG - Post processing image
2023-09-24 15:52:31,644 - root - DEBUG - Post processing image
2023-09-24 15:52:31,756 - root - DEBUG - Post processing image
2023-09-24 15:52:31,874 - root - DEBUG - Post processing image
2023-09-24 15:52:31,992 - root - DEBUG - Post processing image
2023-09-24 15:52:32,109 - root - DEBUG - Post processing image
2023-09-24 15:52:32,224 - root - DEBUG - Post processing image
2023-09-24 15:52:32,338 - root - DEBUG - Post processing image
2023-09-24 15:52:32,455 - root - DEBUG - Post processing image
2023-09-24 15:52:32,566 - root - DEBUG - Post processing image
2023-09-24 15:52:32,677 - root - DEBUG - Post processing image
2023-09-24 15:52:32,789 - root - DEBUG - Post processing image
2023-09-24 15:52:32,901 - root - DEBUG - Post processing image
2023-09-24 15:52:33,013 - root - DEBUG - Post processing image
2023-09-24 15:52:33,127 - root - DEBUG - Post processing image
2023-09-24 15:52:33,243 - root - DEBUG - Post processing image
2023-09-24 15:52:33,358 - root - DEBUG - Post processing image
2023-09-24 15:52:33,468 - root - DEBUG - Post processing image
2023-09-24 15:52:33,582 - root - DEBUG - Post processing image
2023-09-24 15:52:33,694 - root - DEBUG - Post processing image
2023-09-24 15:52:33,809 - root - DEBUG - Post processing image
2023-09-24 15:52:33,925 - root - DEBUG - Post processing image
2023-09-24 15:52:34,038 - root - DEBUG - Post processing image
2023-09-24 15:52:34,152 - root - DEBUG - Post processing image
2023-09-24 15:52:34,263 - root - DEBUG - Post processing image
2023-09-24 15:52:34,380 - root - DEBUG - Post processing image
2023-09-24 15:52:34,496 - root - DEBUG - Post processing image
2023-09-24 15:52:34,608 - root - DEBUG - Post processing image
2023-09-24 15:52:34,719 - root - DEBUG - Post processing image
2023-09-24 15:52:34,834 - root - DEBUG - Post processing image
2023-09-24 15:52:34,949 - root - DEBUG - Post processing image
2023-09-24 15:52:35,062 - root - DEBUG - Post processing image
2023-09-24 15:52:35,174 - root - DEBUG - Post processing image
2023-09-24 15:52:35,286 - root - DEBUG - Post processing image
2023-09-24 15:52:35,398 - root - DEBUG - Post processing image
2023-09-24 15:52:35,520 - root - DEBUG - Post processing image
2023-09-24 15:52:35,639 - root - DEBUG - Post processing image
2023-09-24 15:52:35,759 - root - DEBUG - Post processing image
2023-09-24 15:52:35,875 - root - DEBUG - Post processing image
2023-09-24 15:52:35,997 - root - DEBUG - Post processing image
2023-09-27 17:50:47,976 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-27 17:50:47,976 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-27 17:50:47,976 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-27 17:50:47,976 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-27 17:50:47,977 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-27 17:50:47,977 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-27 17:50:47,977 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-27 17:50:48,070 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': True}
2023-09-27 17:50:50,482 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
2023-09-27 17:50:50,482 - __main__ - ERROR - type object 'Exam' has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Tariq\Documents\birkbeck-project\main.py", line 36, in <module>
    run_exam_extraction(exam_format, 'bio-may2010.pdf', 'bio-may2010-ms.pdf')
  File "C:\Users\Tariq\Documents\birkbeck-project\exam_extractor.py", line 30, in run_exam_extraction
    exam_manager.process()
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 74, in process
    raise e
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 62, in process
    exam = self._get_or_create_exam(db_session, exam_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\extraction_engine\managers\exam_manager.py", line 32, in _get_or_create_exam
    exam = get_from_name(db_session, Exam, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Tariq\Documents\birkbeck-project\database\database_utils.py", line 20, in get_from_name
    return session.query(model).filter(model.name == name).first()
                                       ^^^^^^^^^^
AttributeError: type object 'Exam' has no attribute 'name'
2023-09-27 17:58:54,059 - exam_extractor - DEBUG - Valid formats: ['cambridge_science', 'aqa_maths']
2023-09-27 17:58:54,060 - exam_extractor - INFO - Using database: C:/Users/Tariq/Documents/birkbeck-project/database/dbOne.db
2023-09-27 17:58:54,060 - extraction_engine.managers.exam_manager - DEBUG - Setting PDFManager
2023-09-27 17:58:54,060 - extraction_engine.managers.exam_manager - DEBUG - Setting QuestionManager
2023-09-27 17:58:54,060 - extraction_engine.managers.exam_manager - DEBUG - Setting AnswerManager
2023-09-27 17:58:54,060 - extraction_engine.managers.exam_manager - INFO - Processing exam: cambridge_science
2023-09-27 17:58:54,060 - extraction_engine.managers.exam_manager - INFO - Extracting data from PDFs...
2023-09-27 17:58:54,129 - root - DEBUG - question_data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
answer_data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': True}
2023-09-27 17:58:56,360 - extraction_engine.managers.exam_manager - INFO - Exam data: {'exam_board': 'CAMBRIDGE', 'subject': 'BIOLOGY', 'unit_code': '0610', 'component_code': '11', 'month': 'May', 'year': '2010', 'answer': None}
2023-09-27 17:58:56,368 - root - DEBUG - Exam: <database.models.Exam object at 0x0000025BFF575A90>
2023-09-27 17:58:56,368 - root - DEBUG - Executing question processing pipeline
2023-09-27 17:58:56,368 - root - DEBUG - self._config in _derive_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-27 17:58:56,369 - root - DEBUG - self._config in _validate_attributes: {'binary_threshold': 180, 'margin_start': 0, 'margin_end': 180, 'question_x_start': '', 'question_x_end': '', 'question_y_start': '', 'footer_height': 120, 'padding': 50, 'min_question_spacing': 25, 'whitespace_threshold': 128}
2023-09-27 17:58:56,974 - root - DEBUG - Post processing image
2023-09-27 17:58:57,093 - root - DEBUG - Post processing image
2023-09-27 17:58:57,211 - root - DEBUG - Post processing image
2023-09-27 17:58:57,329 - root - DEBUG - Post processing image
2023-09-27 17:58:57,450 - root - DEBUG - Post processing image
2023-09-27 17:58:57,572 - root - DEBUG - Post processing image
2023-09-27 17:58:57,692 - root - DEBUG - Post processing image
2023-09-27 17:58:57,813 - root - DEBUG - Post processing image
2023-09-27 17:58:57,932 - root - DEBUG - Post processing image
2023-09-27 17:58:58,047 - root - DEBUG - Post processing image
2023-09-27 17:58:58,164 - root - DEBUG - Post processing image
2023-09-27 17:58:58,281 - root - DEBUG - Post processing image
2023-09-27 17:58:58,399 - root - DEBUG - Post processing image
2023-09-27 17:58:58,519 - root - DEBUG - Post processing image
2023-09-27 17:58:58,637 - root - DEBUG - Post processing image
2023-09-27 17:58:58,760 - root - DEBUG - Post processing image
2023-09-27 17:58:58,880 - root - DEBUG - Post processing image
2023-09-27 17:58:58,995 - root - DEBUG - Post processing image
2023-09-27 17:58:59,111 - root - DEBUG - Post processing image
2023-09-27 17:58:59,230 - root - DEBUG - Post processing image
2023-09-27 17:58:59,347 - root - DEBUG - Post processing image
2023-09-27 17:58:59,464 - root - DEBUG - Post processing image
2023-09-27 17:58:59,584 - root - DEBUG - Post processing image
2023-09-27 17:58:59,701 - root - DEBUG - Post processing image
2023-09-27 17:58:59,822 - root - DEBUG - Post processing image
2023-09-27 17:58:59,941 - root - DEBUG - Post processing image
2023-09-27 17:59:00,064 - root - DEBUG - Post processing image
2023-09-27 17:59:00,185 - root - DEBUG - Post processing image
2023-09-27 17:59:00,303 - root - DEBUG - Post processing image
2023-09-27 17:59:00,428 - root - DEBUG - Post processing image
2023-09-27 17:59:00,552 - root - DEBUG - Post processing image
2023-09-27 17:59:00,670 - root - DEBUG - Post processing image
2023-09-27 17:59:00,789 - root - DEBUG - Post processing image
2023-09-27 17:59:00,909 - root - DEBUG - Post processing image
2023-09-27 17:59:01,026 - root - DEBUG - Post processing image
2023-09-27 17:59:01,145 - root - DEBUG - Post processing image
2023-09-27 17:59:01,270 - root - DEBUG - Post processing image
2023-09-27 17:59:01,386 - root - DEBUG - Post processing image
2023-09-27 17:59:01,502 - root - DEBUG - Post processing image
2023-09-27 17:59:01,622 - root - DEBUG - Post processing image
2023-09-27 17:59:01,745 - root - DEBUG - Post processing image
2023-09-27 17:59:01,866 - root - DEBUG - Post processing image
2023-09-27 17:59:01,982 - root - DEBUG - Post processing image
2023-09-27 17:59:02,099 - root - DEBUG - Post processing image
2023-09-27 17:59:02,215 - root - DEBUG - Post processing image
